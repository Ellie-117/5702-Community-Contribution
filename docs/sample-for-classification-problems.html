<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Sample for Classification Problems | Community Contribution – mlr3 tutorial</title>
  <meta name="description" content="Chapter 4 Sample for Classification Problems | Community Contribution – mlr3 tutorial" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Sample for Classification Problems | Community Contribution – mlr3 tutorial" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Sample for Classification Problems | Community Contribution – mlr3 tutorial" />
  
  
  

<meta name="author" content="YLingjun Zhang, Michelle Sun" />


<meta name="date" content="2022-11-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="cheat-sheets.html"/>
<link rel="next" href="sample-for-regression-problems.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">mlr3 Tutorial</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#target-users"><i class="fa fa-check"></i><b>1.2</b> Target Users</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#development"><i class="fa fa-check"></i><b>1.3</b> Development</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="package-prepare.html"><a href="package-prepare.html"><i class="fa fa-check"></i><b>2</b> Package Prepare</a>
<ul>
<li class="chapter" data-level="2.1" data-path="package-prepare.html"><a href="package-prepare.html#installation"><i class="fa fa-check"></i><b>2.1</b> Installation</a></li>
<li class="chapter" data-level="2.2" data-path="package-prepare.html"><a href="package-prepare.html#package-ecosystem"><i class="fa fa-check"></i><b>2.2</b> Package Ecosystem</a></li>
<li class="chapter" data-level="2.3" data-path="package-prepare.html"><a href="package-prepare.html#packages-installation"><i class="fa fa-check"></i><b>2.3</b> Packages Installation</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="cheat-sheets.html"><a href="cheat-sheets.html"><i class="fa fa-check"></i><b>3</b> Cheat Sheets</a>
<ul>
<li class="chapter" data-level="3.1" data-path="cheat-sheets.html"><a href="cheat-sheets.html#basic-function"><i class="fa fa-check"></i><b>3.1</b> Basic Function</a></li>
<li class="chapter" data-level="3.2" data-path="cheat-sheets.html"><a href="cheat-sheets.html#pipeline"><i class="fa fa-check"></i><b>3.2</b> Pipeline</a></li>
<li class="chapter" data-level="3.3" data-path="cheat-sheets.html"><a href="cheat-sheets.html#hyperparameter-tuning"><i class="fa fa-check"></i><b>3.3</b> Hyperparameter Tuning</a></li>
<li class="chapter" data-level="3.4" data-path="cheat-sheets.html"><a href="cheat-sheets.html#feature-selection"><i class="fa fa-check"></i><b>3.4</b> Feature Selection</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html"><i class="fa fa-check"></i><b>4</b> Sample for Classification Problems</a>
<ul>
<li class="chapter" data-level="4.1" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#load-the-r-environment"><i class="fa fa-check"></i><b>4.1</b> Load the R Environment</a></li>
<li class="chapter" data-level="4.2" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#data-description"><i class="fa fa-check"></i><b>4.2</b> Data Description</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#load-the-data"><i class="fa fa-check"></i><b>4.2.1</b> Load the Data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#modeling"><i class="fa fa-check"></i><b>4.3</b> Modeling</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#task-definition"><i class="fa fa-check"></i><b>4.3.1</b> Task Definition</a></li>
<li class="chapter" data-level="4.3.2" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#leaner-definition"><i class="fa fa-check"></i><b>4.3.2</b> Leaner Definition</a></li>
<li class="chapter" data-level="4.3.3" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#training"><i class="fa fa-check"></i><b>4.3.3</b> Training</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#prediction"><i class="fa fa-check"></i><b>4.4</b> Prediction</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#performance-evaluation"><i class="fa fa-check"></i><b>4.4.1</b> Performance Evaluation</a></li>
<li class="chapter" data-level="4.4.2" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#performance-comparision-and-benchmarks"><i class="fa fa-check"></i><b>4.4.2</b> Performance Comparision and Benchmarks</a></li>
<li class="chapter" data-level="4.4.3" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#deviating-from-hyperparameters-defaults"><i class="fa fa-check"></i><b>4.4.3</b> Deviating from hyperparameters defaults</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="sample-for-regression-problems.html"><a href="sample-for-regression-problems.html"><i class="fa fa-check"></i><b>5</b> Sample for Regression Problems</a></li>
<li class="chapter" data-level="6" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>6</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Community Contribution – mlr3 tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sample-for-classification-problems" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Sample for Classification Problems<a href="sample-for-classification-problems.html#sample-for-classification-problems" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="load-the-r-environment" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Load the R Environment<a href="sample-for-classification-problems.html#load-the-r-environment" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="sample-for-classification-problems.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mlr3)</span>
<span id="cb7-2"><a href="sample-for-classification-problems.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mlr3learners)</span>
<span id="cb7-3"><a href="sample-for-classification-problems.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mlr3viz)</span>
<span id="cb7-4"><a href="sample-for-classification-problems.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb7-5"><a href="sample-for-classification-problems.html#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb7-6"><a href="sample-for-classification-problems.html#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
</div>
<div id="data-description" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Data Description<a href="sample-for-classification-problems.html#data-description" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To help readers quickly get started with this package, this section uses the the <code>German credit</code> dataset as an example to show full steps of machine learning.</p>
<div id="load-the-data" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Load the Data<a href="sample-for-classification-problems.html#load-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="sample-for-classification-problems.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;rchallenge&quot;)</span></span>
<span id="cb8-2"><a href="sample-for-classification-problems.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;german&quot;</span>, <span class="at">package =</span> <span class="st">&quot;rchallenge&quot;</span>) </span>
<span id="cb8-3"><a href="sample-for-classification-problems.html#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="sample-for-classification-problems.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#observe the data</span></span>
<span id="cb8-5"><a href="sample-for-classification-problems.html#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(german) <span class="co"># Data Type</span></span></code></pre></div>
<pre><code>## Rows: 1,000
## Columns: 21
## $ status                  &lt;fct&gt; no checking account, no checking account, ... …
## $ duration                &lt;int&gt; 18, 9, 12, 12, 12, 10, 8, 6, 18, 24, 11, 30, 6…
## $ credit_history          &lt;fct&gt; all credits at this bank paid back duly, all c…
## $ purpose                 &lt;fct&gt; car (used), others, retraining, others, others…
## $ amount                  &lt;int&gt; 1049, 2799, 841, 2122, 2171, 2241, 3398, 1361,…
## $ savings                 &lt;fct&gt; unknown/no savings account, unknown/no savings…
## $ employment_duration     &lt;fct&gt; &lt; 1 yr, 1 &lt;= ... &lt; 4 yrs, 4 &lt;= ... &lt; 7 yrs, 1 …
## $ installment_rate        &lt;ord&gt; &lt; 20, 25 &lt;= ... &lt; 35, 25 &lt;= ... &lt; 35, 20 &lt;= ..…
## $ personal_status_sex     &lt;fct&gt; female : non-single or male : single, male : m…
## $ other_debtors           &lt;fct&gt; none, none, none, none, none, none, none, none…
## $ present_residence       &lt;ord&gt; &gt;= 7 yrs, 1 &lt;= ... &lt; 4 yrs, &gt;= 7 yrs, 1 &lt;= ...…
## $ property                &lt;fct&gt; car or other, unknown / no property, unknown /…
## $ age                     &lt;int&gt; 21, 36, 23, 39, 38, 48, 39, 40, 65, 23, 36, 24…
## $ other_installment_plans &lt;fct&gt; none, none, none, none, bank, none, none, none…
## $ housing                 &lt;fct&gt; for free, for free, for free, for free, rent, …
## $ number_credits          &lt;ord&gt; 1, 2-3, 1, 2-3, 2-3, 2-3, 2-3, 1, 2-3, 1, 2-3,…
## $ job                     &lt;fct&gt; skilled employee/official, skilled employee/of…
## $ people_liable           &lt;fct&gt; 0 to 2, 3 or more, 0 to 2, 3 or more, 0 to 2, …
## $ telephone               &lt;fct&gt; no, no, no, no, no, no, no, no, no, no, no, no…
## $ foreign_worker          &lt;fct&gt; no, no, no, yes, yes, yes, yes, yes, no, no, n…
## $ credit_risk             &lt;fct&gt; good, good, good, good, good, good, good, good…</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="sample-for-classification-problems.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(german) <span class="co"># dimension of data</span></span></code></pre></div>
<pre><code>## [1] 1000   21</code></pre>
<p>Through observation, it is found that the dataset has a total of 2000 observations and 21 attributes (columns). The dependent variable we want to predict is creadit_risk (good or bad), and there are 20 independent variables in total, among which duration, age and amount are numerical variables, and the rest are factor variables.</p>
<p><code>skimr</code> packages can be used for a more detailed look at understanding variables.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="sample-for-classification-problems.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;skimr&quot;)</span></span>
<span id="cb12-2"><a href="sample-for-classification-problems.html#cb12-2" aria-hidden="true" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(german)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-8">Table 4.1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">german</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">1000</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">21</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">factor</td>
<td align="left">18</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<colgroup>
<col width="23%" />
<col width="9%" />
<col width="13%" />
<col width="7%" />
<col width="8%" />
<col width="37%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">status</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">4</td>
<td align="left">…: 394, no : 274, …: 269, 0&lt;=: 63</td>
</tr>
<tr class="even">
<td align="left">credit_history</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">5</td>
<td align="left">no : 530, all: 293, exi: 88, cri: 49</td>
</tr>
<tr class="odd">
<td align="left">purpose</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">10</td>
<td align="left">fur: 280, oth: 234, car: 181, car: 103</td>
</tr>
<tr class="even">
<td align="left">savings</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">5</td>
<td align="left">unk: 603, …: 183, …: 103, 100: 63</td>
</tr>
<tr class="odd">
<td align="left">employment_duration</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">5</td>
<td align="left">1 &lt;: 339, &gt;= : 253, 4 &lt;: 174, &lt; 1: 172</td>
</tr>
<tr class="even">
<td align="left">installment_rate</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">TRUE</td>
<td align="right">4</td>
<td align="left">&lt; 2: 476, 25 : 231, 20 : 157, &gt;= : 136</td>
</tr>
<tr class="odd">
<td align="left">personal_status_sex</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">4</td>
<td align="left">mal: 548, fem: 310, fem: 92, mal: 50</td>
</tr>
<tr class="even">
<td align="left">other_debtors</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">3</td>
<td align="left">non: 907, gua: 52, co-: 41</td>
</tr>
<tr class="odd">
<td align="left">present_residence</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">TRUE</td>
<td align="right">4</td>
<td align="left">&gt;= : 413, 1 &lt;: 308, 4 &lt;: 149, &lt; 1: 130</td>
</tr>
<tr class="even">
<td align="left">property</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">4</td>
<td align="left">bui: 332, unk: 282, car: 232, rea: 154</td>
</tr>
<tr class="odd">
<td align="left">other_installment_plans</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">3</td>
<td align="left">non: 814, ban: 139, sto: 47</td>
</tr>
<tr class="even">
<td align="left">housing</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">3</td>
<td align="left">ren: 714, for: 179, own: 107</td>
</tr>
<tr class="odd">
<td align="left">number_credits</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">TRUE</td>
<td align="right">4</td>
<td align="left">1: 633, 2-3: 333, 4-5: 28, &gt;= : 6</td>
</tr>
<tr class="even">
<td align="left">job</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">4</td>
<td align="left">ski: 630, uns: 200, man: 148, une: 22</td>
</tr>
<tr class="odd">
<td align="left">people_liable</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">0 t: 845, 3 o: 155</td>
</tr>
<tr class="even">
<td align="left">telephone</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">no: 596, yes: 404</td>
</tr>
<tr class="odd">
<td align="left">foreign_worker</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">no: 963, yes: 37</td>
</tr>
<tr class="even">
<td align="left">credit_risk</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">goo: 700, bad: 300</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col width="15%" />
<col width="10%" />
<col width="15%" />
<col width="8%" />
<col width="8%" />
<col width="4%" />
<col width="7%" />
<col width="7%" />
<col width="8%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">duration</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">20.90</td>
<td align="right">12.06</td>
<td align="right">4</td>
<td align="right">12.0</td>
<td align="right">18.0</td>
<td align="right">24.00</td>
<td align="right">72</td>
<td align="left">▇▇▂▁▁</td>
</tr>
<tr class="even">
<td align="left">amount</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">3271.25</td>
<td align="right">2822.75</td>
<td align="right">250</td>
<td align="right">1365.5</td>
<td align="right">2319.5</td>
<td align="right">3972.25</td>
<td align="right">18424</td>
<td align="left">▇▂▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">age</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">35.54</td>
<td align="right">11.35</td>
<td align="right">19</td>
<td align="right">27.0</td>
<td align="right">33.0</td>
<td align="right">42.00</td>
<td align="right">75</td>
<td align="left">▇▆▃▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="modeling" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Modeling<a href="sample-for-classification-problems.html#modeling" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>When solving the credit risk classification problem by using the mlr3 package, typical problems that arise when building machine learning workflows are:</p>
<p>What is the problem we are trying to solve?
What is the appropriate learning algorithm?
How do we evaluate “good” performance?</p>
<p>More systematically in mlr3, they can be represented by five components:</p>
<ol style="list-style-type: decimal">
<li>Task Definition</li>
<li>Learner Definition</li>
<li>Training</li>
<li>Prediction</li>
<li>Performance Evaluation</li>
</ol>
<div id="task-definition" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Task Definition<a href="sample-for-classification-problems.html#task-definition" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Firstly, we need to determine the goal of the modeling. Most supervised machine learning problems are regression or classification problems. In mlr3, we define tasks to distinguish between these problems. If we want to solve a classification problem, we define a classification task, <code>TaskClassif</code>. For the regression problem, we define a regression task, <code>TaskRegr</code>.</p>
<p>In our example, our goal is clearly to model or predict the two-factor variable credit_risk. Therefore, we define a <code>TaskClassif</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="sample-for-classification-problems.html#cb13-1" aria-hidden="true" tabindex="-1"></a>task <span class="ot">=</span> TaskClassif<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;germancredit&quot;</span>, german , <span class="at">target =</span> <span class="st">&quot;credit_risk&quot;</span>)</span></code></pre></div>
</div>
<div id="leaner-definition" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Leaner Definition<a href="sample-for-classification-problems.html#leaner-definition" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>After defining the task, we need to decide how to model. This means we need to decide what learning algorithms or Learners are appropriate. Using prior knowledge (for example, knowing that this is a classification task or assuming that the class is linearly divisible) will eventually result in one or more suitable learners.</p>
<p>Many learners are available through the <code>mlr3learners</code> package. In addition, many of the learners are provided via the <code>mlr3extralearners</code> package on GitHub. Together, these two resources account for a large portion of standard learning algorithms.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="sample-for-classification-problems.html#cb14-1" aria-hidden="true" tabindex="-1"></a>mlr_learners</span></code></pre></div>
<pre><code>## &lt;DictionaryLearner&gt; with 27 stored values
## Keys: classif.cv_glmnet, classif.debug, classif.featureless,
##   classif.glmnet, classif.kknn, classif.lda, classif.log_reg,
##   classif.multinom, classif.naive_bayes, classif.nnet, classif.qda,
##   classif.ranger, classif.rpart, classif.svm, classif.xgboost,
##   regr.cv_glmnet, regr.debug, regr.featureless, regr.glmnet, regr.kknn,
##   regr.km, regr.lm, regr.nnet, regr.ranger, regr.rpart, regr.svm,
##   regr.xgboost</code></pre>
<p>A suitable learner for our problem could be one of the following: Logistic regression, CART, random forest, etc.</p>
<p>The learner can be initialized using the <code>lrn()</code> function and the name of the learner, such as <code>lrn(" classif.xxx ")</code>. Use <code>mlr_learners_xxx</code> opens the help page for a learner named xxx.</p>
<p>For example, logistic regression can be initialized by the following way (logistic regression uses R’s glm() function, provided by the mlr3learners package) :</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="sample-for-classification-problems.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;mlr3learners&quot;</span>)</span>
<span id="cb16-2"><a href="sample-for-classification-problems.html#cb16-2" aria-hidden="true" tabindex="-1"></a>learner_logreg <span class="ot">=</span> <span class="fu">lrn</span>(<span class="st">&quot;classif.log_reg&quot;</span>)</span>
<span id="cb16-3"><a href="sample-for-classification-problems.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(learner_logreg)</span></code></pre></div>
<pre><code>## &lt;LearnerClassifLogReg:classif.log_reg&gt;
## * Model: -
## * Parameters: list()
## * Packages: mlr3, mlr3learners, stats
## * Predict Types:  [response], prob
## * Feature Types: logical, integer, numeric, character, factor, ordered
## * Properties: loglik, twoclass</code></pre>
</div>
<div id="training" class="section level3 hasAnchor" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Training<a href="sample-for-classification-problems.html#training" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Training is the process of fitting a model to data.</p>
<ol style="list-style-type: decimal">
<li>logistic regression</li>
</ol>
<p>Let’s start with an example of logistic regression. However, you will immediately see that this process is very easy to generalize to any learner.</p>
<p>You can use <code>$train()</code> to train the initialized learner:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="sample-for-classification-problems.html#cb18-1" aria-hidden="true" tabindex="-1"></a>learner_logreg<span class="sc">$</span><span class="fu">train</span>(task)</span></code></pre></div>
<p>Typically, in machine learning, we don’t use the full data available, but instead use a subset, the so-called training data. To perform data splitting effectively, you can do the following:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="sample-for-classification-problems.html#cb19-1" aria-hidden="true" tabindex="-1"></a>train_set <span class="ot">=</span> <span class="fu">sample</span>(task<span class="sc">$</span>row_ids, <span class="fl">0.8</span> <span class="sc">*</span> task<span class="sc">$</span>nrow)</span>
<span id="cb19-2"><a href="sample-for-classification-problems.html#cb19-2" aria-hidden="true" tabindex="-1"></a>test_set <span class="ot">=</span> <span class="fu">setdiff</span>(task<span class="sc">$</span>row_ids, train_set)</span></code></pre></div>
<p>80% of the data is used for training. The remaining 20% is used for subsequent evaluation. train_set is an integer vector that refers to the selected rows of the original dataset. In mlr3, you can declare training using a subset of the data by attaching the parameter row_ids = train_set:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="sample-for-classification-problems.html#cb20-1" aria-hidden="true" tabindex="-1"></a>learner_logreg<span class="sc">$</span><span class="fu">train</span>(task, <span class="at">row_ids =</span> train_set)</span></code></pre></div>
<p>The model after training fitting can be displayed through the following commands:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="sample-for-classification-problems.html#cb21-1" aria-hidden="true" tabindex="-1"></a>learner_logreg<span class="sc">$</span>model</span></code></pre></div>
<pre><code>## 
## Call:  stats::glm(formula = task$formula(), family = &quot;binomial&quot;, data = data, 
##     model = FALSE)
## 
## Coefficients:
##                                               (Intercept)  
##                                                 0.8581755  
##                                                       age  
##                                                -0.0134562  
##                                                    amount  
##                                                 0.0001399  
##    credit_historycritical account/other credits elsewhere  
##                                                -0.1533328  
## credit_historyno credits taken/all credits paid back duly  
##                                                -0.7394986  
##    credit_historyexisting credits paid back duly till now  
##                                                -1.2312315  
##     credit_historyall credits at this bank paid back duly  
##                                                -1.5491495  
##                                                  duration  
##                                                 0.0302540  
##                                 employment_duration&lt; 1 yr  
##                                                 0.1118118  
##                       employment_duration1 &lt;= ... &lt; 4 yrs  
##                                                -0.2052523  
##                       employment_duration4 &lt;= ... &lt; 7 yrs  
##                                                -0.9275865  
##                               employment_duration&gt;= 7 yrs  
##                                                -0.1503952  
##                                          foreign_workerno  
##                                                 2.1382590  
##                                               housingrent  
##                                                -0.4427178  
##                                                housingown  
##                                                -0.3512201  
##                                        installment_rate.L  
##                                                 0.7554584  
##                                        installment_rate.Q  
##                                                -0.0622299  
##                                        installment_rate.C  
##                                                 0.0799246  
##                                   jobunskilled - resident  
##                                                 0.3786091  
##                              jobskilled employee/official  
##                                                 0.4421256  
##             jobmanager/self-empl./highly qualif. employee  
##                                                 0.4098225  
##                                          number_credits.L  
##                                                 0.6870849  
##                                          number_credits.Q  
##                                                 0.0991970  
##                                          number_credits.C  
##                                                 0.2653675  
##                                 other_debtorsco-applicant  
##                                                 0.4872337  
##                                    other_debtorsguarantor  
##                                                -0.8452995  
##                             other_installment_plansstores  
##                                                -0.1813985  
##                               other_installment_plansnone  
##                                                -0.7244259  
##                                       people_liable0 to 2  
##                                                -0.3975315  
##   personal_status_sexfemale : non-single or male : single  
##                                                -0.3242585  
##                 personal_status_sexmale : married/widowed  
##                                                -0.9029088  
##                        personal_status_sexfemale : single  
##                                                -0.3733041  
##                                       present_residence.L  
##                                                 0.0800920  
##                                       present_residence.Q  
##                                                -0.3474337  
##                                       present_residence.C  
##                                                 0.3052616  
##                                      propertycar or other  
##                                                 0.2344431  
##         propertybuilding soc. savings agr./life insurance  
##                                                 0.0134200  
##                                       propertyreal estate  
##                                                 0.2687556  
##                                          purposecar (new)  
##                                                -1.7025757  
##                                         purposecar (used)  
##                                                -0.8844013  
##                                purposefurniture/equipment  
##                                                -0.8951083  
##                                   purposeradio/television  
##                                                -0.5701578  
##                                purposedomestic appliances  
##                                                -0.2278890  
##                                            purposerepairs  
##                                                 0.2908071  
##                                           purposevacation  
##                                                -1.5593405  
##                                         purposeretraining  
##                                                -0.7081279  
##                                           purposebusiness  
##                                                -1.4977935  
##                                      savings... &lt;  100 DM  
##                                                -0.3756259  
##                               savings100 &lt;= ... &lt;  500 DM  
##                                                -0.3372338  
##                               savings500 &lt;= ... &lt; 1000 DM  
##                                                -0.6243132  
##                                     savings... &gt;= 1000 DM  
##                                                -0.9171936  
##                                          status... &lt; 0 DM  
##                                                -0.6287901  
##                                    status0&lt;= ... &lt; 200 DM  
##                                                -1.2927716  
##          status... &gt;= 200 DM / salary for at least 1 year  
##                                                -2.1134490  
##                        telephoneyes (under customer name)  
##                                                -0.2780796  
## 
## Degrees of Freedom: 799 Total (i.e. Null);  745 Residual
## Null Deviance:       977.4 
## Residual Deviance: 687.1     AIC: 797.1</code></pre>
<p>You can check the type and summary of the model after Logistic regression training:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="sample-for-classification-problems.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(learner_logreg<span class="sc">$</span>model)</span></code></pre></div>
<pre><code>## [1] &quot;glm&quot; &quot;lm&quot;</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="sample-for-classification-problems.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(learner_logreg<span class="sc">$</span>model)</span></code></pre></div>
<pre><code>## 
## Call:
## stats::glm(formula = task$formula(), family = &quot;binomial&quot;, data = data, 
##     model = FALSE)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -2.2508  -0.6835  -0.3374   0.6562   2.6880  
## 
## Coefficients:
##                                                             Estimate Std. Error
## (Intercept)                                                8.582e-01  1.450e+00
## age                                                       -1.346e-02  1.099e-02
## amount                                                     1.399e-04  5.284e-05
## credit_historycritical account/other credits elsewhere    -1.533e-01  6.525e-01
## credit_historyno credits taken/all credits paid back duly -7.395e-01  5.032e-01
## credit_historyexisting credits paid back duly till now    -1.231e+00  5.400e-01
## credit_historyall credits at this bank paid back duly     -1.549e+00  5.040e-01
## duration                                                   3.025e-02  1.091e-02
## employment_duration&lt; 1 yr                                  1.118e-01  5.303e-01
## employment_duration1 &lt;= ... &lt; 4 yrs                       -2.053e-01  5.110e-01
## employment_duration4 &lt;= ... &lt; 7 yrs                       -9.276e-01  5.548e-01
## employment_duration&gt;= 7 yrs                               -1.504e-01  5.069e-01
## foreign_workerno                                           2.138e+00  9.145e-01
## housingrent                                               -4.427e-01  2.749e-01
## housingown                                                -3.512e-01  5.727e-01
## installment_rate.L                                         7.555e-01  2.445e-01
## installment_rate.Q                                        -6.223e-02  2.245e-01
## installment_rate.C                                         7.992e-02  2.337e-01
## jobunskilled - resident                                    3.786e-01  7.281e-01
## jobskilled employee/official                               4.421e-01  7.008e-01
## jobmanager/self-empl./highly qualif. employee              4.098e-01  7.135e-01
## number_credits.L                                           6.871e-01  8.302e-01
## number_credits.Q                                           9.920e-02  6.933e-01
## number_credits.C                                           2.654e-01  4.999e-01
## other_debtorsco-applicant                                  4.872e-01  4.783e-01
## other_debtorsguarantor                                    -8.453e-01  4.783e-01
## other_installment_plansstores                             -1.814e-01  4.869e-01
## other_installment_plansnone                               -7.244e-01  2.881e-01
## people_liable0 to 2                                       -3.975e-01  2.903e-01
## personal_status_sexfemale : non-single or male : single   -3.243e-01  4.367e-01
## personal_status_sexmale : married/widowed                 -9.029e-01  4.297e-01
## personal_status_sexfemale : single                        -3.733e-01  5.161e-01
## present_residence.L                                        8.009e-02  2.358e-01
## present_residence.Q                                       -3.474e-01  2.304e-01
## present_residence.C                                        3.053e-01  2.299e-01
## propertycar or other                                       2.344e-01  2.865e-01
## propertybuilding soc. savings agr./life insurance          1.342e-02  2.719e-01
## propertyreal estate                                        2.688e-01  5.110e-01
## purposecar (new)                                          -1.703e+00  4.370e-01
## purposecar (used)                                         -8.844e-01  2.982e-01
## purposefurniture/equipment                                -8.951e-01  2.837e-01
## purposeradio/television                                   -5.702e-01  9.159e-01
## purposedomestic appliances                                -2.279e-01  5.954e-01
## purposerepairs                                             2.908e-01  4.662e-01
## purposevacation                                           -1.559e+00  1.288e+00
## purposeretraining                                         -7.081e-01  3.859e-01
## purposebusiness                                           -1.498e+00  8.145e-01
## savings... &lt;  100 DM                                      -3.756e-01  3.353e-01
## savings100 &lt;= ... &lt;  500 DM                               -3.372e-01  4.903e-01
## savings500 &lt;= ... &lt; 1000 DM                               -6.243e-01  5.829e-01
## savings... &gt;= 1000 DM                                     -9.172e-01  3.030e-01
## status... &lt; 0 DM                                          -6.288e-01  2.528e-01
## status0&lt;= ... &lt; 200 DM                                    -1.293e+00  4.472e-01
## status... &gt;= 200 DM / salary for at least 1 year          -2.113e+00  2.765e-01
## telephoneyes (under customer name)                        -2.781e-01  2.337e-01
##                                                           z value Pr(&gt;|z|)    
## (Intercept)                                                 0.592  0.55403    
## age                                                        -1.225  0.22076    
## amount                                                      2.648  0.00810 ** 
## credit_historycritical account/other credits elsewhere     -0.235  0.81422    
## credit_historyno credits taken/all credits paid back duly  -1.470  0.14166    
## credit_historyexisting credits paid back duly till now     -2.280  0.02260 *  
## credit_historyall credits at this bank paid back duly      -3.073  0.00212 ** 
## duration                                                    2.772  0.00557 ** 
## employment_duration&lt; 1 yr                                   0.211  0.83299    
## employment_duration1 &lt;= ... &lt; 4 yrs                        -0.402  0.68795    
## employment_duration4 &lt;= ... &lt; 7 yrs                        -1.672  0.09455 .  
## employment_duration&gt;= 7 yrs                                -0.297  0.76669    
## foreign_workerno                                            2.338  0.01937 *  
## housingrent                                                -1.611  0.10724    
## housingown                                                 -0.613  0.53972    
## installment_rate.L                                          3.090  0.00200 ** 
## installment_rate.Q                                         -0.277  0.78160    
## installment_rate.C                                          0.342  0.73233    
## jobunskilled - resident                                     0.520  0.60308    
## jobskilled employee/official                                0.631  0.52809    
## jobmanager/self-empl./highly qualif. employee               0.574  0.56572    
## number_credits.L                                            0.828  0.40789    
## number_credits.Q                                            0.143  0.88623    
## number_credits.C                                            0.531  0.59555    
## other_debtorsco-applicant                                   1.019  0.30833    
## other_debtorsguarantor                                     -1.767  0.07715 .  
## other_installment_plansstores                              -0.373  0.70948    
## other_installment_plansnone                                -2.514  0.01193 *  
## people_liable0 to 2                                        -1.369  0.17091    
## personal_status_sexfemale : non-single or male : single    -0.743  0.45772    
## personal_status_sexmale : married/widowed                  -2.101  0.03563 *  
## personal_status_sexfemale : single                         -0.723  0.46948    
## present_residence.L                                         0.340  0.73410    
## present_residence.Q                                        -1.508  0.13149    
## present_residence.C                                         1.328  0.18429    
## propertycar or other                                        0.818  0.41323    
## propertybuilding soc. savings agr./life insurance           0.049  0.96063    
## propertyreal estate                                         0.526  0.59890    
## purposecar (new)                                           -3.896 9.78e-05 ***
## purposecar (used)                                          -2.966  0.00302 ** 
## purposefurniture/equipment                                 -3.155  0.00160 ** 
## purposeradio/television                                    -0.623  0.53361    
## purposedomestic appliances                                 -0.383  0.70190    
## purposerepairs                                              0.624  0.53276    
## purposevacation                                            -1.211  0.22588    
## purposeretraining                                          -1.835  0.06647 .  
## purposebusiness                                            -1.839  0.06594 .  
## savings... &lt;  100 DM                                       -1.120  0.26257    
## savings100 &lt;= ... &lt;  500 DM                                -0.688  0.49161    
## savings500 &lt;= ... &lt; 1000 DM                                -1.071  0.28417    
## savings... &gt;= 1000 DM                                      -3.027  0.00247 ** 
## status... &lt; 0 DM                                           -2.488  0.01286 *  
## status0&lt;= ... &lt; 200 DM                                     -2.891  0.00384 ** 
## status... &gt;= 200 DM / salary for at least 1 year           -7.643 2.12e-14 ***
## telephoneyes (under customer name)                         -1.190  0.23412    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 977.38  on 799  degrees of freedom
## Residual deviance: 687.07  on 745  degrees of freedom
## AIC: 797.07
## 
## Number of Fisher Scoring iterations: 5</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Random Forest</li>
</ol>
<p>Just like logistic regression, we can train a random forest. We use the ranger package to do this quickly. To do this, we first need to define the learner and then actually train it.</p>
<p>We now provide additional importance parameters (importance = “permutation”). In doing so, we override the default and let the learner determine the importance of the feature based on the ranking of the importance of the feature:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="sample-for-classification-problems.html#cb27-1" aria-hidden="true" tabindex="-1"></a>learner_rf <span class="ot">=</span> <span class="fu">lrn</span>(<span class="st">&quot;classif.ranger&quot;</span>, <span class="at">importance =</span> <span class="st">&quot;permutation&quot;</span>)</span>
<span id="cb27-2"><a href="sample-for-classification-problems.html#cb27-2" aria-hidden="true" tabindex="-1"></a>learner_rf<span class="sc">$</span><span class="fu">train</span>(task, <span class="at">row_ids =</span> train_set)</span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="sample-for-classification-problems.html#cb28-1" aria-hidden="true" tabindex="-1"></a>learner_rf<span class="sc">$</span><span class="fu">importance</span>()</span></code></pre></div>
<pre><code>##                  status                duration                  amount 
##            0.0416829784            0.0151093820            0.0107790696 
##          credit_history                 savings                 purpose 
##            0.0095855254            0.0074409852            0.0040758618 
##           other_debtors                property other_installment_plans 
##            0.0033979602            0.0033761843            0.0029194502 
##        installment_rate                     age                     job 
##            0.0027028427            0.0023539745            0.0022958331 
##     personal_status_sex               telephone     employment_duration 
##            0.0021592658            0.0012838410            0.0008079655 
##           people_liable                 housing          foreign_worker 
##            0.0007864887            0.0002829865            0.0002408694 
##       present_residence          number_credits 
##           -0.0001716909           -0.0006796375</code></pre>
<p>To get a graph of importance values, we convert importance to data.table format and process it with ggplot2:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="sample-for-classification-problems.html#cb30-1" aria-hidden="true" tabindex="-1"></a>importance <span class="ot">=</span> <span class="fu">as.data.table</span>(learner_rf<span class="sc">$</span><span class="fu">importance</span>(), <span class="at">keep.rownames =</span> <span class="cn">TRUE</span>)</span>
<span id="cb30-2"><a href="sample-for-classification-problems.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(importance) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Feature&quot;</span>, <span class="st">&quot;Importance&quot;</span>)</span>
<span id="cb30-3"><a href="sample-for-classification-problems.html#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="sample-for-classification-problems.html#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>importance,</span>
<span id="cb30-5"><a href="sample-for-classification-problems.html#cb30-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Feature, Importance), <span class="at">y =</span> Importance)) <span class="sc">+</span> </span>
<span id="cb30-6"><a href="sample-for-classification-problems.html#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span> <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="cc-mlr3tutorial_files/figure-html/unnamed-chunk-20-1.png" width="672" />
It can be seen that the first seven variables play an important role in predicting the dependent variable.</p>
</div>
</div>
<div id="prediction" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Prediction<a href="sample-for-classification-problems.html#prediction" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Next we will use the trained model to make predictions. After training the model, the model can be used for prediction. In general, prediction is the main purpose of machine learning models.</p>
<p>In our case, the model can be used to classify new credit applicants. They are based on the associated credit risk (good and bad) of the feature. Typically, machine learning models predict numerical values. In a regression situation, this is natural. For classification, most models predict scores or probabilities. Based on these values, category predictions can be made.</p>
<ol style="list-style-type: decimal">
<li>Predict Classes</li>
</ol>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="sample-for-classification-problems.html#cb31-1" aria-hidden="true" tabindex="-1"></a>pred_logreg <span class="ot">=</span> learner_logreg<span class="sc">$</span><span class="fu">predict</span>(task, <span class="at">row_ids =</span> test_set)</span>
<span id="cb31-2"><a href="sample-for-classification-problems.html#cb31-2" aria-hidden="true" tabindex="-1"></a>pred_rf <span class="ot">=</span> learner_rf<span class="sc">$</span><span class="fu">predict</span>(task, <span class="at">row_ids =</span> test_set)</span>
<span id="cb31-3"><a href="sample-for-classification-problems.html#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="sample-for-classification-problems.html#cb31-4" aria-hidden="true" tabindex="-1"></a>pred_logreg</span></code></pre></div>
<pre><code>## &lt;PredictionClassif&gt; for 200 observations:
##     row_ids truth response
##           4  good     good
##           5  good     good
##          24  good     good
## ---                       
##         987   bad     good
##         992   bad      bad
##         996   bad      bad</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="sample-for-classification-problems.html#cb33-1" aria-hidden="true" tabindex="-1"></a>pred_rf</span></code></pre></div>
<pre><code>## &lt;PredictionClassif&gt; for 200 observations:
##     row_ids truth response
##           4  good     good
##           5  good     good
##          24  good     good
## ---                       
##         987   bad      bad
##         992   bad      bad
##         996   bad     good</code></pre>
<p>The $predict() method returns a Prediction object. If you want to use it later, you can convert it to data.table format. We can also display the prediction results in the confusion matrix:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="sample-for-classification-problems.html#cb35-1" aria-hidden="true" tabindex="-1"></a>pred_logreg<span class="sc">$</span>confusion</span></code></pre></div>
<pre><code>##         truth
## response bad good
##     bad   26   20
##     good  34  120</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="sample-for-classification-problems.html#cb37-1" aria-hidden="true" tabindex="-1"></a>pred_rf<span class="sc">$</span>confusion</span></code></pre></div>
<pre><code>##         truth
## response bad good
##     bad   25   17
##     good  35  123</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Predict Probabilities</li>
</ol>
<p>Most learning period Learner can not only predict category variables (” response “), but also predict their”confidence”/” uncertainty “degree to a given response. Typically, we do this by setting the Learner’s $predict_type to”prob”. Sometimes this needs to be done before the learner is trained. Alternatively, we can create the learner directly using this option: <code>lrn(" classif.log_reg ", predict_type= "prob")</code></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="sample-for-classification-problems.html#cb39-1" aria-hidden="true" tabindex="-1"></a>learner_logreg<span class="sc">$</span>predict_type <span class="ot">=</span> <span class="st">&quot;prob&quot;</span></span>
<span id="cb39-2"><a href="sample-for-classification-problems.html#cb39-2" aria-hidden="true" tabindex="-1"></a>learner_logreg<span class="sc">$</span><span class="fu">predict</span>(task, <span class="at">row_ids =</span> test_set)</span></code></pre></div>
<pre><code>## &lt;PredictionClassif&gt; for 200 observations:
##     row_ids truth response   prob.bad prob.good
##           4  good     good 0.17828549 0.8217145
##           5  good     good 0.18934356 0.8106564
##          24  good     good 0.09551314 0.9044869
## ---                                            
##         987   bad     good 0.22545501 0.7745450
##         992   bad      bad 0.65830217 0.3416978
##         996   bad      bad 0.50570030 0.4942997</code></pre>
<div id="performance-evaluation" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Performance Evaluation<a href="sample-for-classification-problems.html#performance-evaluation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To measure the learner’s performance on new data, we usually simulate a sight unseen data by dividing the data into training sets and test sets. The training set is used to train the learner, and the test set is only used to predict and evaluate the performance of the trained learner. Many resampling methods (cross-validation, bootstrap) repeat the segmentation process in different ways.</p>
<p>In mlr3, we need to specify the resampling strategy using the rsmp() function:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="sample-for-classification-problems.html#cb41-1" aria-hidden="true" tabindex="-1"></a>resampling <span class="ot">=</span> <span class="fu">rsmp</span>(<span class="st">&quot;holdout&quot;</span>, <span class="at">ratio =</span> <span class="dv">2</span><span class="sc">/</span><span class="dv">3</span>)</span>
<span id="cb41-2"><a href="sample-for-classification-problems.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(resampling)</span></code></pre></div>
<pre><code>## &lt;ResamplingHoldout&gt;: Holdout
## * Iterations: 1
## * Instantiated: FALSE
## * Parameters: ratio=0.6667</code></pre>
<p>In this case, we use a “holdout,” which is a simple train-test split (only one iteration). We use the resample() function for resampling calculation:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="sample-for-classification-problems.html#cb43-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">=</span> <span class="fu">resample</span>(task, <span class="at">learner =</span> learner_logreg, <span class="at">resampling =</span> resampling)</span></code></pre></div>
<pre><code>## INFO  [00:44:05.994] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 1/1)</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="sample-for-classification-problems.html#cb45-1" aria-hidden="true" tabindex="-1"></a>res</span></code></pre></div>
<pre><code>## &lt;ResampleResult&gt; of 1 iterations
## * Task: germancredit
## * Learner: classif.log_reg
## * Warnings: 0 in 0 iterations
## * Errors: 0 in 0 iterations</code></pre>
<p>The default score for the measure is included in <code>$aggregate()</code>:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="sample-for-classification-problems.html#cb47-1" aria-hidden="true" tabindex="-1"></a>res<span class="sc">$</span><span class="fu">aggregate</span>()</span></code></pre></div>
<pre><code>## classif.ce 
##  0.2882883</code></pre>
<p>The default metric in this case is classification error. The lower the better.</p>
<p>We can run different resampling strategies, such as repeated adherence (” secondary sampling “), or cross-validation. Most methods perform repeated training/prediction cycles on different subsets of data and aggregate the results (usually as averages). Doing this manually requires us to write a loop. mlr3 does the job for us:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="sample-for-classification-problems.html#cb49-1" aria-hidden="true" tabindex="-1"></a>resampling <span class="ot">=</span> <span class="fu">rsmp</span>(<span class="st">&quot;subsampling&quot;</span>, <span class="at">repeats=</span><span class="dv">10</span>)</span>
<span id="cb49-2"><a href="sample-for-classification-problems.html#cb49-2" aria-hidden="true" tabindex="-1"></a>rr <span class="ot">=</span> <span class="fu">resample</span>(task, <span class="at">learner =</span> learner_logreg, <span class="at">resampling =</span> resampling)</span></code></pre></div>
<pre><code>## INFO  [00:44:06.095] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 1/10)
## INFO  [00:44:06.125] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 2/10)
## INFO  [00:44:06.169] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 3/10)
## INFO  [00:44:06.193] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 4/10)
## INFO  [00:44:06.234] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 5/10)
## INFO  [00:44:06.276] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 6/10)
## INFO  [00:44:06.301] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 7/10)
## INFO  [00:44:06.324] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 8/10)
## INFO  [00:44:06.391] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 9/10)
## INFO  [00:44:06.415] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 10/10)</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="sample-for-classification-problems.html#cb51-1" aria-hidden="true" tabindex="-1"></a>rr<span class="sc">$</span><span class="fu">aggregate</span>()</span></code></pre></div>
<pre><code>## classif.ce 
##  0.2594595</code></pre>
<p>In addition, we can also use cross validation:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="sample-for-classification-problems.html#cb53-1" aria-hidden="true" tabindex="-1"></a>resampling <span class="ot">=</span> resampling <span class="ot">=</span> <span class="fu">rsmp</span>(<span class="st">&quot;cv&quot;</span>, <span class="at">folds=</span><span class="dv">10</span>)</span>
<span id="cb53-2"><a href="sample-for-classification-problems.html#cb53-2" aria-hidden="true" tabindex="-1"></a>rr <span class="ot">=</span> <span class="fu">resample</span>(task, <span class="at">learner =</span> learner_logreg, <span class="at">resampling =</span> resampling)</span></code></pre></div>
<pre><code>## INFO  [00:44:06.488] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 1/10)
## INFO  [00:44:06.520] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 2/10)
## INFO  [00:44:06.550] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 3/10)
## INFO  [00:44:06.577] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 4/10)
## INFO  [00:44:06.607] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 5/10)
## INFO  [00:44:06.734] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 6/10)
## INFO  [00:44:06.761] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 7/10)
## INFO  [00:44:06.787] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 8/10)
## INFO  [00:44:06.815] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 9/10)
## INFO  [00:44:06.845] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 10/10)</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="sample-for-classification-problems.html#cb55-1" aria-hidden="true" tabindex="-1"></a>rr<span class="sc">$</span><span class="fu">aggregate</span>()</span></code></pre></div>
<pre><code>## classif.ce 
##      0.255</code></pre>
</div>
<div id="performance-comparision-and-benchmarks" class="section level3 hasAnchor" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Performance Comparision and Benchmarks<a href="sample-for-classification-problems.html#performance-comparision-and-benchmarks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can compare the learner by manually evaluating the resample() for each learning period. However, benchmark() automatically performs resampling evaluations for multiple learners and tasks. benchmark_grid() Create a fully interleaved design: compare multiple learners on multiple tasks. Resampling multiple times.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="sample-for-classification-problems.html#cb57-1" aria-hidden="true" tabindex="-1"></a>learners <span class="ot">=</span> <span class="fu">lrns</span>(<span class="fu">c</span>(<span class="st">&quot;classif.log_reg&quot;</span>, <span class="st">&quot;classif.ranger&quot;</span>), <span class="at">predict_type =</span> <span class="st">&quot;prob&quot;</span>)</span>
<span id="cb57-2"><a href="sample-for-classification-problems.html#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="sample-for-classification-problems.html#cb57-3" aria-hidden="true" tabindex="-1"></a>bm_design <span class="ot">=</span> <span class="fu">benchmark_grid</span>(</span>
<span id="cb57-4"><a href="sample-for-classification-problems.html#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">tasks =</span> task,</span>
<span id="cb57-5"><a href="sample-for-classification-problems.html#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">learners =</span> learners,</span>
<span id="cb57-6"><a href="sample-for-classification-problems.html#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamplings =</span> <span class="fu">rsmp</span>(<span class="st">&quot;cv&quot;</span>, <span class="at">folds =</span> <span class="dv">50</span>)</span>
<span id="cb57-7"><a href="sample-for-classification-problems.html#cb57-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-8"><a href="sample-for-classification-problems.html#cb57-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-9"><a href="sample-for-classification-problems.html#cb57-9" aria-hidden="true" tabindex="-1"></a>bmr <span class="ot">=</span> <span class="fu">benchmark</span>(bm_design)</span></code></pre></div>
<pre><code>## INFO  [00:44:06.966] [mlr3] Running benchmark with 100 resampling iterations
## INFO  [00:44:06.969] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 1/50)
## INFO  [00:44:07.004] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 2/50)
## INFO  [00:44:07.031] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 3/50)
## INFO  [00:44:07.057] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 4/50)
## INFO  [00:44:07.084] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 5/50)
## INFO  [00:44:07.114] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 6/50)
## INFO  [00:44:07.140] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 7/50)
## INFO  [00:44:07.167] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 8/50)
## INFO  [00:44:07.197] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 9/50)
## INFO  [00:44:07.223] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 10/50)
## INFO  [00:44:07.250] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 11/50)
## INFO  [00:44:07.279] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 12/50)
## INFO  [00:44:07.305] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 13/50)
## INFO  [00:44:07.332] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 14/50)
## INFO  [00:44:07.361] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 15/50)
## INFO  [00:44:07.388] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 16/50)
## INFO  [00:44:07.420] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 17/50)
## INFO  [00:44:07.446] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 18/50)
## INFO  [00:44:07.473] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 19/50)
## INFO  [00:44:07.499] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 20/50)
## INFO  [00:44:07.531] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 21/50)
## INFO  [00:44:07.558] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 22/50)
## INFO  [00:44:07.586] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 23/50)
## INFO  [00:44:07.620] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 24/50)
## INFO  [00:44:07.650] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 25/50)
## INFO  [00:44:07.678] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 26/50)
## INFO  [00:44:07.711] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 27/50)
## INFO  [00:44:07.739] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 28/50)
## INFO  [00:44:07.767] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 29/50)
## INFO  [00:44:07.797] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 30/50)
## INFO  [00:44:07.824] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 31/50)
## INFO  [00:44:07.854] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 32/50)
## INFO  [00:44:07.881] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 33/50)
## INFO  [00:44:07.907] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 34/50)
## INFO  [00:44:07.936] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 35/50)
## INFO  [00:44:07.963] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 36/50)
## INFO  [00:44:07.992] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 37/50)
## INFO  [00:44:08.019] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 38/50)
## INFO  [00:44:08.050] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 39/50)
## INFO  [00:44:08.102] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 40/50)
## INFO  [00:44:08.134] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 41/50)
## INFO  [00:44:08.160] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 42/50)
## INFO  [00:44:08.187] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 43/50)
## INFO  [00:44:08.217] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 44/50)
## INFO  [00:44:08.244] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 45/50)
## INFO  [00:44:08.270] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 46/50)
## INFO  [00:44:08.301] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 47/50)
## INFO  [00:44:08.327] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 48/50)
## INFO  [00:44:08.353] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 49/50)
## INFO  [00:44:08.384] [mlr3] Applying learner &#39;classif.log_reg&#39; on task &#39;germancredit&#39; (iter 50/50)
## INFO  [00:44:08.410] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 1/50)
## INFO  [00:44:08.621] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 2/50)
## INFO  [00:44:08.837] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 3/50)
## INFO  [00:44:09.045] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 4/50)
## INFO  [00:44:09.257] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 5/50)
## INFO  [00:44:09.469] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 6/50)
## INFO  [00:44:09.676] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 7/50)
## INFO  [00:44:09.893] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 8/50)
## INFO  [00:44:10.100] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 9/50)
## INFO  [00:44:10.307] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 10/50)
## INFO  [00:44:10.517] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 11/50)
## INFO  [00:44:10.732] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 12/50)
## INFO  [00:44:10.953] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 13/50)
## INFO  [00:44:11.170] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 14/50)
## INFO  [00:44:11.394] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 15/50)
## INFO  [00:44:11.613] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 16/50)
## INFO  [00:44:11.846] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 17/50)
## INFO  [00:44:12.058] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 18/50)
## INFO  [00:44:12.267] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 19/50)
## INFO  [00:44:12.475] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 20/50)
## INFO  [00:44:12.700] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 21/50)
## INFO  [00:44:12.918] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 22/50)
## INFO  [00:44:13.136] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 23/50)
## INFO  [00:44:13.361] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 24/50)
## INFO  [00:44:13.580] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 25/50)
## INFO  [00:44:13.806] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 26/50)
## INFO  [00:44:14.014] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 27/50)
## INFO  [00:44:14.221] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 28/50)
## INFO  [00:44:14.428] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 29/50)
## INFO  [00:44:14.642] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 30/50)
## INFO  [00:44:14.851] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 31/50)
## INFO  [00:44:15.059] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 32/50)
## INFO  [00:44:15.272] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 33/50)
## INFO  [00:44:15.479] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 34/50)
## INFO  [00:44:15.799] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 35/50)
## INFO  [00:44:16.005] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 36/50)
## INFO  [00:44:16.212] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 37/50)
## INFO  [00:44:16.419] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 38/50)
## INFO  [00:44:16.626] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 39/50)
## INFO  [00:44:16.835] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 40/50)
## INFO  [00:44:17.051] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 41/50)
## INFO  [00:44:17.257] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 42/50)
## INFO  [00:44:17.465] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 43/50)
## INFO  [00:44:17.671] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 44/50)
## INFO  [00:44:17.878] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 45/50)
## INFO  [00:44:18.085] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 46/50)
## INFO  [00:44:18.299] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 47/50)
## INFO  [00:44:18.506] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 48/50)
## INFO  [00:44:18.714] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 49/50)
## INFO  [00:44:18.920] [mlr3] Applying learner &#39;classif.ranger&#39; on task &#39;germancredit&#39; (iter 50/50)
## INFO  [00:44:19.141] [mlr3] Finished benchmark</code></pre>
<p>In benchmarking, we can compare different measures. Here, we look at the misclassification rate and the AUC:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="sample-for-classification-problems.html#cb59-1" aria-hidden="true" tabindex="-1"></a>measures <span class="ot">=</span> <span class="fu">msrs</span>(<span class="fu">c</span>(<span class="st">&quot;classif.ce&quot;</span>, <span class="st">&quot;classif.auc&quot;</span>))</span>
<span id="cb59-2"><a href="sample-for-classification-problems.html#cb59-2" aria-hidden="true" tabindex="-1"></a>performances <span class="ot">=</span> bmr<span class="sc">$</span><span class="fu">aggregate</span>(measures)</span>
<span id="cb59-3"><a href="sample-for-classification-problems.html#cb59-3" aria-hidden="true" tabindex="-1"></a>performances[, <span class="fu">c</span>(<span class="st">&quot;learner_id&quot;</span>, <span class="st">&quot;classif.ce&quot;</span>, <span class="st">&quot;classif.auc&quot;</span>)]</span></code></pre></div>
<pre><code>##         learner_id classif.ce classif.auc
## 1: classif.log_reg      0.249   0.7675573
## 2:  classif.ranger      0.230   0.7892183</code></pre>
</div>
<div id="deviating-from-hyperparameters-defaults" class="section level3 hasAnchor" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Deviating from hyperparameters defaults<a href="sample-for-classification-problems.html#deviating-from-hyperparameters-defaults" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The techniques previously demonstrated build the backbone of the machine learning workflow that features mlr3. However, in most cases, people will never proceed as we did. While many R packages have carefully chosen default Settings, they do not operate optimally under any circumstances. In general, we can choose the value of such a hyperparameter. The learner’s (super) parameter can be accessed and set via its ParamSet $param_set:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="sample-for-classification-problems.html#cb61-1" aria-hidden="true" tabindex="-1"></a>learner_rf<span class="sc">$</span>param_set</span></code></pre></div>
<pre><code>## &lt;ParamSet&gt;
##                               id    class lower upper nlevels        default
##  1:                        alpha ParamDbl  -Inf   Inf     Inf            0.5
##  2:       always.split.variables ParamUty    NA    NA     Inf &lt;NoDefault[3]&gt;
##  3:                class.weights ParamUty    NA    NA     Inf               
##  4:                      holdout ParamLgl    NA    NA       2          FALSE
##  5:                   importance ParamFct    NA    NA       4 &lt;NoDefault[3]&gt;
##  6:                   keep.inbag ParamLgl    NA    NA       2          FALSE
##  7:                    max.depth ParamInt     0   Inf     Inf               
##  8:                min.node.size ParamInt     1   Inf     Inf               
##  9:                     min.prop ParamDbl  -Inf   Inf     Inf            0.1
## 10:                      minprop ParamDbl  -Inf   Inf     Inf            0.1
## 11:                         mtry ParamInt     1   Inf     Inf &lt;NoDefault[3]&gt;
## 12:                   mtry.ratio ParamDbl     0     1     Inf &lt;NoDefault[3]&gt;
## 13:            num.random.splits ParamInt     1   Inf     Inf              1
## 14:                  num.threads ParamInt     1   Inf     Inf              1
## 15:                    num.trees ParamInt     1   Inf     Inf            500
## 16:                    oob.error ParamLgl    NA    NA       2           TRUE
## 17:        regularization.factor ParamUty    NA    NA     Inf              1
## 18:      regularization.usedepth ParamLgl    NA    NA       2          FALSE
## 19:                      replace ParamLgl    NA    NA       2           TRUE
## 20:    respect.unordered.factors ParamFct    NA    NA       3         ignore
## 21:              sample.fraction ParamDbl     0     1     Inf &lt;NoDefault[3]&gt;
## 22:                  save.memory ParamLgl    NA    NA       2          FALSE
## 23: scale.permutation.importance ParamLgl    NA    NA       2          FALSE
## 24:                    se.method ParamFct    NA    NA       2        infjack
## 25:                         seed ParamInt  -Inf   Inf     Inf               
## 26:         split.select.weights ParamUty    NA    NA     Inf               
## 27:                    splitrule ParamFct    NA    NA       3           gini
## 28:                      verbose ParamLgl    NA    NA       2           TRUE
## 29:                 write.forest ParamLgl    NA    NA       2           TRUE
##                               id    class lower upper nlevels        default
##        parents       value
##  1:                       
##  2:                       
##  3:                       
##  4:                       
##  5:            permutation
##  6:                       
##  7:                       
##  8:                       
##  9:                       
## 10:                       
## 11:                       
## 12:                       
## 13:  splitrule            
## 14:                      1
## 15:                       
## 16:                       
## 17:                       
## 18:                       
## 19:                       
## 20:                       
## 21:                       
## 22:                       
## 23: importance            
## 24:                       
## 25:                       
## 26:                       
## 27:                       
## 28:                       
## 29:                       
##        parents       value</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="sample-for-classification-problems.html#cb63-1" aria-hidden="true" tabindex="-1"></a>learner_rf<span class="sc">$</span>param_set<span class="sc">$</span>values <span class="ot">=</span> <span class="fu">list</span>(<span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>We can choose parameters for our learners in two different ways. If we had a prior knowledge of how the learner should be (hyper-) parameterized, the way to go would be to manually enter the parameters in the parameter set. In most cases, however, we want to tune the learner so that it can search for “good” model configurations on its own. For now, we only want to compare a few models.</p>
<p>To see which parameters can be manipulated, we can investigate the original package version’s parameters or look at the learner’s parameter set:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="sample-for-classification-problems.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.table</span>(learner_rf<span class="sc">$</span>param_set)[,.(id, class, lower, upper)]</span></code></pre></div>
<pre><code>##                               id    class lower upper
##  1:                        alpha ParamDbl  -Inf   Inf
##  2:       always.split.variables ParamUty    NA    NA
##  3:                class.weights ParamUty    NA    NA
##  4:                      holdout ParamLgl    NA    NA
##  5:                   importance ParamFct    NA    NA
##  6:                   keep.inbag ParamLgl    NA    NA
##  7:                    max.depth ParamInt     0   Inf
##  8:                min.node.size ParamInt     1   Inf
##  9:                     min.prop ParamDbl  -Inf   Inf
## 10:                      minprop ParamDbl  -Inf   Inf
## 11:                         mtry ParamInt     1   Inf
## 12:                   mtry.ratio ParamDbl     0     1
## 13:            num.random.splits ParamInt     1   Inf
## 14:                  num.threads ParamInt     1   Inf
## 15:                    num.trees ParamInt     1   Inf
## 16:                    oob.error ParamLgl    NA    NA
## 17:        regularization.factor ParamUty    NA    NA
## 18:      regularization.usedepth ParamLgl    NA    NA
## 19:                      replace ParamLgl    NA    NA
## 20:    respect.unordered.factors ParamFct    NA    NA
## 21:              sample.fraction ParamDbl     0     1
## 22:                  save.memory ParamLgl    NA    NA
## 23: scale.permutation.importance ParamLgl    NA    NA
## 24:                    se.method ParamFct    NA    NA
## 25:                         seed ParamInt  -Inf   Inf
## 26:         split.select.weights ParamUty    NA    NA
## 27:                    splitrule ParamFct    NA    NA
## 28:                      verbose ParamLgl    NA    NA
## 29:                 write.forest ParamLgl    NA    NA
##                               id    class lower upper</code></pre>
<p>For a random forest, two meaningful parameters that control the complexity of the model are num.trees and mtry. num.trees default to 500 and mtry to floor(sqrt(ncol(data) -1)), or 4 in our example.</p>
<p>Our goal here is to train three different learners:
1) Default random forest.
2) Random forest with low num.trees and low mtry.
3) Random forest with high num.trees and high mtry.</p>
<p>We will benchmark their performance against the German credit data set. To do this, we built three learners and set the parameters accordingly:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="sample-for-classification-problems.html#cb66-1" aria-hidden="true" tabindex="-1"></a>rf_med <span class="ot">=</span> <span class="fu">lrn</span>(<span class="st">&quot;classif.ranger&quot;</span>, <span class="at">id =</span> <span class="st">&quot;med&quot;</span>, <span class="at">predict_type =</span> <span class="st">&quot;prob&quot;</span>)</span>
<span id="cb66-2"><a href="sample-for-classification-problems.html#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="sample-for-classification-problems.html#cb66-3" aria-hidden="true" tabindex="-1"></a>rf_low <span class="ot">=</span> <span class="fu">lrn</span>(<span class="st">&quot;classif.ranger&quot;</span>, <span class="at">id =</span> <span class="st">&quot;low&quot;</span>, <span class="at">predict_type =</span> <span class="st">&quot;prob&quot;</span>,</span>
<span id="cb66-4"><a href="sample-for-classification-problems.html#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">num.trees =</span> <span class="dv">5</span>, <span class="at">mtry =</span> <span class="dv">2</span>)</span>
<span id="cb66-5"><a href="sample-for-classification-problems.html#cb66-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-6"><a href="sample-for-classification-problems.html#cb66-6" aria-hidden="true" tabindex="-1"></a>rf_high <span class="ot">=</span> <span class="fu">lrn</span>(<span class="st">&quot;classif.ranger&quot;</span>, <span class="at">id =</span> <span class="st">&quot;high&quot;</span>, <span class="at">predict_type =</span> <span class="st">&quot;prob&quot;</span>,</span>
<span id="cb66-7"><a href="sample-for-classification-problems.html#cb66-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">num.trees =</span> <span class="dv">1000</span>, <span class="at">mtry =</span> <span class="dv">11</span>)</span></code></pre></div>
<p>Once the learner is defined, we can benchmark them:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="sample-for-classification-problems.html#cb67-1" aria-hidden="true" tabindex="-1"></a>learners <span class="ot">=</span> <span class="fu">list</span>(rf_low, rf_med, rf_high)</span>
<span id="cb67-2"><a href="sample-for-classification-problems.html#cb67-2" aria-hidden="true" tabindex="-1"></a>bm_design <span class="ot">=</span> <span class="fu">benchmark_grid</span>(</span>
<span id="cb67-3"><a href="sample-for-classification-problems.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">tasks =</span> task,</span>
<span id="cb67-4"><a href="sample-for-classification-problems.html#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">learners =</span> learners,</span>
<span id="cb67-5"><a href="sample-for-classification-problems.html#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamplings =</span> <span class="fu">rsmp</span>(<span class="st">&quot;cv&quot;</span>, <span class="at">folds =</span> <span class="dv">10</span>)</span>
<span id="cb67-6"><a href="sample-for-classification-problems.html#cb67-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb67-7"><a href="sample-for-classification-problems.html#cb67-7" aria-hidden="true" tabindex="-1"></a>bmr <span class="ot">=</span> <span class="fu">benchmark</span>(bm_design)</span></code></pre></div>
<pre><code>## INFO  [00:44:19.423] [mlr3] Running benchmark with 30 resampling iterations
## INFO  [00:44:19.426] [mlr3] Applying learner &#39;low&#39; on task &#39;germancredit&#39; (iter 1/10)
## INFO  [00:44:19.438] [mlr3] Applying learner &#39;low&#39; on task &#39;germancredit&#39; (iter 2/10)
## INFO  [00:44:19.451] [mlr3] Applying learner &#39;low&#39; on task &#39;germancredit&#39; (iter 3/10)
## INFO  [00:44:19.463] [mlr3] Applying learner &#39;low&#39; on task &#39;germancredit&#39; (iter 4/10)
## INFO  [00:44:19.475] [mlr3] Applying learner &#39;low&#39; on task &#39;germancredit&#39; (iter 5/10)
## INFO  [00:44:19.488] [mlr3] Applying learner &#39;low&#39; on task &#39;germancredit&#39; (iter 6/10)
## INFO  [00:44:19.500] [mlr3] Applying learner &#39;low&#39; on task &#39;germancredit&#39; (iter 7/10)
## INFO  [00:44:19.512] [mlr3] Applying learner &#39;low&#39; on task &#39;germancredit&#39; (iter 8/10)
## INFO  [00:44:19.530] [mlr3] Applying learner &#39;low&#39; on task &#39;germancredit&#39; (iter 9/10)
## INFO  [00:44:19.542] [mlr3] Applying learner &#39;low&#39; on task &#39;germancredit&#39; (iter 10/10)
## INFO  [00:44:19.554] [mlr3] Applying learner &#39;med&#39; on task &#39;germancredit&#39; (iter 1/10)
## INFO  [00:44:19.758] [mlr3] Applying learner &#39;med&#39; on task &#39;germancredit&#39; (iter 2/10)
## INFO  [00:44:19.956] [mlr3] Applying learner &#39;med&#39; on task &#39;germancredit&#39; (iter 3/10)
## INFO  [00:44:20.160] [mlr3] Applying learner &#39;med&#39; on task &#39;germancredit&#39; (iter 4/10)
## INFO  [00:44:20.368] [mlr3] Applying learner &#39;med&#39; on task &#39;germancredit&#39; (iter 5/10)
## INFO  [00:44:20.570] [mlr3] Applying learner &#39;med&#39; on task &#39;germancredit&#39; (iter 6/10)
## INFO  [00:44:20.769] [mlr3] Applying learner &#39;med&#39; on task &#39;germancredit&#39; (iter 7/10)
## INFO  [00:44:20.964] [mlr3] Applying learner &#39;med&#39; on task &#39;germancredit&#39; (iter 8/10)
## INFO  [00:44:21.169] [mlr3] Applying learner &#39;med&#39; on task &#39;germancredit&#39; (iter 9/10)
## INFO  [00:44:21.366] [mlr3] Applying learner &#39;med&#39; on task &#39;germancredit&#39; (iter 10/10)
## INFO  [00:44:21.565] [mlr3] Applying learner &#39;high&#39; on task &#39;germancredit&#39; (iter 1/10)
## INFO  [00:44:22.166] [mlr3] Applying learner &#39;high&#39; on task &#39;germancredit&#39; (iter 2/10)
## INFO  [00:44:22.767] [mlr3] Applying learner &#39;high&#39; on task &#39;germancredit&#39; (iter 3/10)
## INFO  [00:44:23.355] [mlr3] Applying learner &#39;high&#39; on task &#39;germancredit&#39; (iter 4/10)
## INFO  [00:44:23.938] [mlr3] Applying learner &#39;high&#39; on task &#39;germancredit&#39; (iter 5/10)
## INFO  [00:44:24.515] [mlr3] Applying learner &#39;high&#39; on task &#39;germancredit&#39; (iter 6/10)
## INFO  [00:44:25.102] [mlr3] Applying learner &#39;high&#39; on task &#39;germancredit&#39; (iter 7/10)
## INFO  [00:44:25.683] [mlr3] Applying learner &#39;high&#39; on task &#39;germancredit&#39; (iter 8/10)
## INFO  [00:44:26.265] [mlr3] Applying learner &#39;high&#39; on task &#39;germancredit&#39; (iter 9/10)
## INFO  [00:44:26.852] [mlr3] Applying learner &#39;high&#39; on task &#39;germancredit&#39; (iter 10/10)
## INFO  [00:44:27.437] [mlr3] Finished benchmark</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="sample-for-classification-problems.html#cb69-1" aria-hidden="true" tabindex="-1"></a>bmr</span></code></pre></div>
<pre><code>## &lt;BenchmarkResult&gt; of 30 rows with 3 resampling runs
##  nr      task_id learner_id resampling_id iters warnings errors
##   1 germancredit        low            cv    10        0      0
##   2 germancredit        med            cv    10        0      0
##   3 germancredit       high            cv    10        0      0</code></pre>
<p>We can compare the classification error rate and AUC of different learners:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="sample-for-classification-problems.html#cb71-1" aria-hidden="true" tabindex="-1"></a>measures <span class="ot">=</span> <span class="fu">msrs</span>(<span class="fu">c</span>(<span class="st">&quot;classif.ce&quot;</span>, <span class="st">&quot;classif.auc&quot;</span>))</span>
<span id="cb71-2"><a href="sample-for-classification-problems.html#cb71-2" aria-hidden="true" tabindex="-1"></a>performances <span class="ot">=</span> bmr<span class="sc">$</span><span class="fu">aggregate</span>(measures)</span>
<span id="cb71-3"><a href="sample-for-classification-problems.html#cb71-3" aria-hidden="true" tabindex="-1"></a>performances[, .(learner_id, classif.ce, classif.auc)]</span></code></pre></div>
<pre><code>##    learner_id classif.ce classif.auc
## 1:        low      0.265   0.7322205
## 2:        med      0.229   0.8059448
## 3:       high      0.230   0.8015941</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="sample-for-classification-problems.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(bmr)</span></code></pre></div>
<p><img src="cc-mlr3tutorial_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<p>Compared with the three parameter tuning models, the default parameter model in this example is better.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cheat-sheets.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sample-for-regression-problems.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Ellie-117/mlr3_tutorial/edit/main/Classification.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/Ellie-117/mlr3_tutorial/blob/main/Classification.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
