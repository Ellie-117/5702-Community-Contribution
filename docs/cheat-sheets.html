<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Cheat Sheets | Community Contribution – mlr3 tutorial</title>
  <meta name="description" content="Chapter 3 Cheat Sheets | Community Contribution – mlr3 tutorial" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Cheat Sheets | Community Contribution – mlr3 tutorial" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Cheat Sheets | Community Contribution – mlr3 tutorial" />
  
  
  

<meta name="author" content="Lingjun Zhang, Michelle Sun" />


<meta name="date" content="2022-11-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="package-prepare.html"/>
<link rel="next" href="sample-for-classification-problems.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">mlr3 Tutorial</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#target-users"><i class="fa fa-check"></i><b>1.2</b> Target Users</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#development"><i class="fa fa-check"></i><b>1.3</b> Development</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="package-prepare.html"><a href="package-prepare.html"><i class="fa fa-check"></i><b>2</b> Package Prepare</a>
<ul>
<li class="chapter" data-level="2.1" data-path="package-prepare.html"><a href="package-prepare.html#installation"><i class="fa fa-check"></i><b>2.1</b> Installation</a></li>
<li class="chapter" data-level="2.2" data-path="package-prepare.html"><a href="package-prepare.html#package-ecosystem"><i class="fa fa-check"></i><b>2.2</b> Package Ecosystem</a></li>
<li class="chapter" data-level="2.3" data-path="package-prepare.html"><a href="package-prepare.html#packages-installation"><i class="fa fa-check"></i><b>2.3</b> Packages Installation</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="cheat-sheets.html"><a href="cheat-sheets.html"><i class="fa fa-check"></i><b>3</b> Cheat Sheets</a>
<ul>
<li class="chapter" data-level="3.1" data-path="cheat-sheets.html"><a href="cheat-sheets.html#basic-function"><i class="fa fa-check"></i><b>3.1</b> Basic Function</a></li>
<li class="chapter" data-level="3.2" data-path="cheat-sheets.html"><a href="cheat-sheets.html#pipeline"><i class="fa fa-check"></i><b>3.2</b> Pipeline</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="cheat-sheets.html"><a href="cheat-sheets.html#the-building-blocks-pipeops"><i class="fa fa-check"></i><b>3.2.1</b> The Building Blocks: PipeOps</a></li>
<li class="chapter" data-level="3.2.2" data-path="cheat-sheets.html"><a href="cheat-sheets.html#nodes-edges-and-graphs"><i class="fa fa-check"></i><b>3.2.2</b> Nodes, Edges and Graphs</a></li>
<li class="chapter" data-level="3.2.3" data-path="cheat-sheets.html"><a href="cheat-sheets.html#modeling"><i class="fa fa-check"></i><b>3.2.3</b> Modeling</a></li>
<li class="chapter" data-level="3.2.4" data-path="cheat-sheets.html"><a href="cheat-sheets.html#non-linear-graphs"><i class="fa fa-check"></i><b>3.2.4</b> Non-Linear Graphs</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="cheat-sheets.html"><a href="cheat-sheets.html#hyperparameter-tuning"><i class="fa fa-check"></i><b>3.3</b> Hyperparameter Tuning</a></li>
<li class="chapter" data-level="3.4" data-path="cheat-sheets.html"><a href="cheat-sheets.html#feature-selection"><i class="fa fa-check"></i><b>3.4</b> Feature Selection</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html"><i class="fa fa-check"></i><b>4</b> Sample for Classification Problems</a>
<ul>
<li class="chapter" data-level="4.1" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#load-the-r-environment"><i class="fa fa-check"></i><b>4.1</b> Load the R Environment</a></li>
<li class="chapter" data-level="4.2" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#data-description"><i class="fa fa-check"></i><b>4.2</b> Data Description</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#load-the-data"><i class="fa fa-check"></i><b>4.2.1</b> Load the Data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#modeling-1"><i class="fa fa-check"></i><b>4.3</b> Modeling</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#task-definition"><i class="fa fa-check"></i><b>4.3.1</b> Task Definition</a></li>
<li class="chapter" data-level="4.3.2" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#leaner-definition"><i class="fa fa-check"></i><b>4.3.2</b> Leaner Definition</a></li>
<li class="chapter" data-level="4.3.3" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#training"><i class="fa fa-check"></i><b>4.3.3</b> Training</a></li>
<li class="chapter" data-level="4.3.4" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#prediction"><i class="fa fa-check"></i><b>4.3.4</b> Prediction</a></li>
<li class="chapter" data-level="4.3.5" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#performance-evaluation"><i class="fa fa-check"></i><b>4.3.5</b> Performance Evaluation</a></li>
<li class="chapter" data-level="4.3.6" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#performance-comparision-and-benchmarks"><i class="fa fa-check"></i><b>4.3.6</b> Performance Comparision and Benchmarks</a></li>
<li class="chapter" data-level="4.3.7" data-path="sample-for-classification-problems.html"><a href="sample-for-classification-problems.html#deviating-from-hyperparameters-defaults"><i class="fa fa-check"></i><b>4.3.7</b> Deviating from Hyperparameters Defaults</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="sample-for-regression-problems.html"><a href="sample-for-regression-problems.html"><i class="fa fa-check"></i><b>5</b> Sample for Regression Problems</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sample-for-regression-problems.html"><a href="sample-for-regression-problems.html#visualization"><i class="fa fa-check"></i><b>5.1</b> Visualization</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>6</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Community Contribution – mlr3 tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cheat-sheets" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Cheat Sheets<a href="cheat-sheets.html#cheat-sheets" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="basic-function" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Basic Function<a href="cheat-sheets.html#basic-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>as_bench_result(x, ) converts object to benchmark result for visualization</p></li>
<li><p>mlr3 Dictionaries The dictionaries stores all the classes with functions that we can use in this mlr3 library.</p>
<p>-mlr_tasks</p>
<p>-mlr_task_generators</p>
<p>-mlr_learners</p>
<p>-mlr_measures</p>
<p>-mlr_resampling</p></li>
</ul>
<p>Example usages: The function keys() returns all learners keys prebuilt in mlr3 package. If we install mlr3learners package, we will get an extension version of it. Installing the according libraries and extend the dictionaries.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="cheat-sheets.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mlr3)</span>
<span id="cb7-2"><a href="cheat-sheets.html#cb7-2" aria-hidden="true" tabindex="-1"></a>mlr_learners<span class="sc">$</span><span class="fu">keys</span>(<span class="at">pattern =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;classif.cv_glmnet&quot;   &quot;classif.debug&quot;       &quot;classif.featureless&quot;
##  [4] &quot;classif.glmnet&quot;      &quot;classif.kknn&quot;        &quot;classif.lda&quot;        
##  [7] &quot;classif.log_reg&quot;     &quot;classif.multinom&quot;    &quot;classif.naive_bayes&quot;
## [10] &quot;classif.nnet&quot;        &quot;classif.qda&quot;         &quot;classif.ranger&quot;     
## [13] &quot;classif.rpart&quot;       &quot;classif.svm&quot;         &quot;classif.xgboost&quot;    
## [16] &quot;regr.cv_glmnet&quot;      &quot;regr.debug&quot;          &quot;regr.featureless&quot;   
## [19] &quot;regr.glmnet&quot;         &quot;regr.kknn&quot;           &quot;regr.km&quot;            
## [22] &quot;regr.lm&quot;             &quot;regr.nnet&quot;           &quot;regr.ranger&quot;        
## [25] &quot;regr.rpart&quot;          &quot;regr.svm&quot;            &quot;regr.xgboost&quot;</code></pre>
<p>For a brief introduction, we will explain the keywords in these six to get a better understanding:</p>
<p>-classif means it is used to solve classification related problems, regr means it is used to solve regression related problems.</p>
<p>-featureless means that the learner will ignore all the features during train and only consider the response.</p>
<p>-classif.rpart is a LearnerClassif for a classification tree implemented and regr.rpart is a LearnerRegr for a regression tree implemented. These two functions will take in features during training.</p>
<p>-debug learner used for debugging purposes.</p>
<p>The function get() retrieves object by key. It will show all the information about the key.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="cheat-sheets.html#cb9-1" aria-hidden="true" tabindex="-1"></a>mlr_learners<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;classif.rpart&quot;</span>)</span></code></pre></div>
<pre><code>## &lt;LearnerClassifRpart:classif.rpart&gt;: Classification Tree
## * Model: -
## * Parameters: xval=0
## * Packages: mlr3, rpart
## * Predict Types:  [response], prob
## * Feature Types: logical, integer, numeric, factor, ordered
## * Properties: importance, missings, multiclass, selected_features,
##   twoclass, weights</code></pre>
<p>The function makes dictionary to data.table form.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="cheat-sheets.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">as.data.table</span>(mlr_tasks))</span></code></pre></div>
<pre><code>##               key                   label task_type nrow ncol properties lgl
## 1: boston_housing   Boston Housing Prices      regr  506   19              0
## 2:  breast_cancer Wisconsin Breast Cancer   classif  683   10   twoclass   0
## 3:  german_credit           German Credit   classif 1000   21   twoclass   0
## 4:           iris            Iris Flowers   classif  150    5 multiclass   0
## 5:         mtcars            Motor Trends      regr   32   11              0
## 6:       penguins         Palmer Penguins   classif  344    8 multiclass   0
##    int dbl chr fct ord pxc
## 1:   3  13   0   2   0   0
## 2:   0   0   0   0   9   0
## 3:   3   0   0  14   3   0
## 4:   0   4   0   0   0   0
## 5:   0  10   0   0   0   0
## 6:   3   2   0   2   0   0</code></pre>
<ul>
<li>Tasks</li>
</ul>
<p>Target determines the machine learning Task. We can create a classification task:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="cheat-sheets.html#cb13-1" aria-hidden="true" tabindex="-1"></a>task1 <span class="ot">=</span> <span class="fu">as_task_classif</span>(<span class="at">x =</span> iris, <span class="at">target =</span> <span class="st">&quot;Species&quot;</span>)</span>
<span id="cb13-2"><a href="cheat-sheets.html#cb13-2" aria-hidden="true" tabindex="-1"></a>task1</span></code></pre></div>
<pre><code>## &lt;TaskClassif:iris&gt; (150 x 5)
## * Target: Species
## * Properties: multiclass
## * Features (4):
##   - dbl (4): Petal.Length, Petal.Width, Sepal.Length, Sepal.Width</code></pre>
<p>We can create a regression task:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="cheat-sheets.html#cb15-1" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">33</span>, <span class="dv">55</span>, <span class="dv">25</span>)</span>
<span id="cb15-2"><a href="cheat-sheets.html#cb15-2" aria-hidden="true" tabindex="-1"></a>salary <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20000</span>, <span class="dv">50000</span>, <span class="dv">15000</span>)</span>
<span id="cb15-3"><a href="cheat-sheets.html#cb15-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(age, salary)</span>
<span id="cb15-4"><a href="cheat-sheets.html#cb15-4" aria-hidden="true" tabindex="-1"></a>task2 <span class="ot">=</span> <span class="fu">as_task_regr</span>(<span class="at">x=</span> df, <span class="at">target =</span> <span class="st">&quot;salary&quot;</span>)</span>
<span id="cb15-5"><a href="cheat-sheets.html#cb15-5" aria-hidden="true" tabindex="-1"></a>task2</span></code></pre></div>
<pre><code>## &lt;TaskRegr:df&gt; (3 x 2)
## * Target: salary
## * Properties: -
## * Features (1):
##   - dbl (1): age</code></pre>
<p>We can also use the example tasks in mlr_tasks by calling tsk(task_name):</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="cheat-sheets.html#cb17-1" aria-hidden="true" tabindex="-1"></a>task3 <span class="ot">=</span> <span class="fu">tsk</span>(<span class="st">&quot;zoo&quot;</span>)</span>
<span id="cb17-2"><a href="cheat-sheets.html#cb17-2" aria-hidden="true" tabindex="-1"></a>task3</span></code></pre></div>
<pre><code>## &lt;TaskClassif:zoo&gt; (101 x 17): Zoo Animals
## * Target: type
## * Properties: multiclass
## * Features (16):
##   - lgl (15): airborne, aquatic, backbone, breathes, catsize, domestic,
##     eggs, feathers, fins, hair, milk, predator, tail, toothed, venomous
##   - int (1): legs</code></pre>
<p>We can perform some functions on the task: task$positive = “<argument>” sets positive class for binary classification</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="cheat-sheets.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#return number of rows</span></span>
<span id="cb19-2"><a href="cheat-sheets.html#cb19-2" aria-hidden="true" tabindex="-1"></a>task1<span class="sc">$</span>nrow</span></code></pre></div>
<pre><code>## [1] 150</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="cheat-sheets.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#return number of columns</span></span>
<span id="cb21-2"><a href="cheat-sheets.html#cb21-2" aria-hidden="true" tabindex="-1"></a>task1<span class="sc">$</span>ncol</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="cheat-sheets.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#subset the task by selecting features</span></span>
<span id="cb23-2"><a href="cheat-sheets.html#cb23-2" aria-hidden="true" tabindex="-1"></a>task1<span class="sc">$</span><span class="fu">select</span>(<span class="st">&quot;Sepal.Length&quot;</span>)</span></code></pre></div>
<p>task$cbind(data) adds columns</p>
<p>task$rbind(data) adds rows</p>
<p>task$feature_names return feature names in the task</p>
<ul>
<li>Learner</li>
</ul>
<p>To use a learner, we can call the method using:</p>
<p>learner = mlr_learners$get(method) or</p>
<p>learner = lrn(method)</p>
<p>Here is an example:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="cheat-sheets.html#cb24-1" aria-hidden="true" tabindex="-1"></a>learner <span class="ot">=</span> <span class="fu">lrn</span>(<span class="st">&quot;regr.rpart&quot;</span>)</span>
<span id="cb24-2"><a href="cheat-sheets.html#cb24-2" aria-hidden="true" tabindex="-1"></a>learner</span></code></pre></div>
<pre><code>## &lt;LearnerRegrRpart:regr.rpart&gt;: Regression Tree
## * Model: -
## * Parameters: xval=0
## * Packages: mlr3, rpart
## * Predict Types:  [response]
## * Feature Types: logical, integer, numeric, factor, ordered
## * Properties: importance, missings, selected_features, weights</code></pre>
<ul>
<li>Train</li>
</ul>
<p>We train our task using the learner we chose:</p>
<p>learner$train(task, row_ids)</p>
<p>learner$model: the model is stored and viewed</p>
<p>Split on test/train:</p>
<p>train_set = sample(task$nrow, (percentage) * my_task$nrow)</p>
<p>test_set = setdiff(seq_len(task$nrow), train_set)</p>
<ul>
<li>Predict</li>
</ul>
<p>These two methods will predict on the select data: prediction = learner$predict(task, row_ids)</p>
<p>prediction = learner$predict_newdata(data)</p>
<ul>
<li>Model Evaluation</li>
</ul>
<p>Here are the model evaluation metrics in the mlr_measures library:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="cheat-sheets.html#cb26-1" aria-hidden="true" tabindex="-1"></a>mlr_measures<span class="sc">$</span><span class="fu">keys</span>(<span class="at">pattern =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;aic&quot;                 &quot;bic&quot;                 &quot;classif.acc&quot;        
##  [4] &quot;classif.auc&quot;         &quot;classif.bacc&quot;        &quot;classif.bbrier&quot;     
##  [7] &quot;classif.ce&quot;          &quot;classif.costs&quot;       &quot;classif.dor&quot;        
## [10] &quot;classif.fbeta&quot;       &quot;classif.fdr&quot;         &quot;classif.fn&quot;         
## [13] &quot;classif.fnr&quot;         &quot;classif.fomr&quot;        &quot;classif.fp&quot;         
## [16] &quot;classif.fpr&quot;         &quot;classif.logloss&quot;     &quot;classif.mauc_au1p&quot;  
## [19] &quot;classif.mauc_au1u&quot;   &quot;classif.mauc_aunp&quot;   &quot;classif.mauc_aunu&quot;  
## [22] &quot;classif.mbrier&quot;      &quot;classif.mcc&quot;         &quot;classif.npv&quot;        
## [25] &quot;classif.ppv&quot;         &quot;classif.prauc&quot;       &quot;classif.precision&quot;  
## [28] &quot;classif.recall&quot;      &quot;classif.sensitivity&quot; &quot;classif.specificity&quot;
## [31] &quot;classif.tn&quot;          &quot;classif.tnr&quot;         &quot;classif.tp&quot;         
## [34] &quot;classif.tpr&quot;         &quot;debug&quot;               &quot;oob_error&quot;          
## [37] &quot;regr.bias&quot;           &quot;regr.ktau&quot;           &quot;regr.mae&quot;           
## [40] &quot;regr.mape&quot;           &quot;regr.maxae&quot;          &quot;regr.medae&quot;         
## [43] &quot;regr.medse&quot;          &quot;regr.mse&quot;            &quot;regr.msle&quot;          
## [46] &quot;regr.pbias&quot;          &quot;regr.rae&quot;            &quot;regr.rmse&quot;          
## [49] &quot;regr.rmsle&quot;          &quot;regr.rrse&quot;           &quot;regr.rse&quot;           
## [52] &quot;regr.rsq&quot;            &quot;regr.sae&quot;            &quot;regr.smape&quot;         
## [55] &quot;regr.srho&quot;           &quot;regr.sse&quot;            &quot;selected_features&quot;  
## [58] &quot;sim.jaccard&quot;         &quot;sim.phi&quot;             &quot;time_both&quot;          
## [61] &quot;time_predict&quot;        &quot;time_train&quot;</code></pre>
<p>prediction$score(measures): returns the model evaluation metrics of the selected learner</p>
</div>
<div id="pipeline" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Pipeline<a href="cheat-sheets.html#pipeline" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Machine learning workflows can be written as directed “Graphs”/“Pipelines” that represent data flows between preprocessing, model fitting, and ensemble learning units in an expressive and intuitive language. We will most often use the term “Graph” in this manual but it can interchangeably be used with “pipeline” or “workflow”.</p>
<p>Single computational steps can be represented as so-called PipeOps, which can then be connected with directed edges in a Graph. The scope of mlr3pipelines is still growing. Currently supported features are:</p>
<ul>
<li><p>Data manipulation and preprocessing operations, e.g. PCA, feature filtering, imputation</p></li>
<li><p>Task subsampling for speed and outcome class imbalance handling</p></li>
<li><p>mlr3 Learner operations for prediction and stacking</p></li>
<li><p>Ensemble methods and aggregation of predictions</p></li>
</ul>
<p>Additionally, we implement several meta operators that can be used to construct powerful pipelines:</p>
<ul>
<li><p>Simultaneous path branching (data going both ways)</p></li>
<li><p>Alternative path branching (data going one specific way, controlled by hyperparameters)</p></li>
</ul>
<p>Using methods from <code>mlr3tuning</code>, it is even possible to simultaneously optimize parameters of multiple processing units.</p>
<div id="the-building-blocks-pipeops" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> The Building Blocks: PipeOps<a href="cheat-sheets.html#the-building-blocks-pipeops" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The building blocks of mlr3pipelines are PipeOp-objects (PO). They can be constructed directly using PipeOp&lt;NAME&gt;$new(), but the recommended way is to retrieve them from the mlr_pipeops dictionary:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="cheat-sheets.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;mlr3pipelines&quot;</span>)</span>
<span id="cb28-2"><a href="cheat-sheets.html#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="cheat-sheets.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.table</span>(mlr_pipeops)</span></code></pre></div>
<pre><code>##                       key
##  1:                boxcox
##  2:                branch
##  3:                 chunk
##  4:        classbalancing
##  5:            classifavg
##  6:          classweights
##  7:              colapply
##  8:       collapsefactors
##  9:              colroles
## 10:                  copy
## 11:          datefeatures
## 12:                encode
## 13:          encodeimpact
## 14:            encodelmer
## 15:          featureunion
## 16:                filter
## 17:            fixfactors
## 18:               histbin
## 19:                   ica
## 20:        imputeconstant
## 21:            imputehist
## 22:         imputelearner
## 23:            imputemean
## 24:          imputemedian
## 25:            imputemode
## 26:             imputeoor
## 27:          imputesample
## 28:             kernelpca
## 29:               learner
## 30:            learner_cv
## 31:               missind
## 32:           modelmatrix
## 33:     multiplicityexply
## 34:     multiplicityimply
## 35:                mutate
## 36:                   nmf
## 37:                   nop
## 38:              ovrsplit
## 39:              ovrunite
## 40:                   pca
## 41:                 proxy
## 42:           quantilebin
## 43:      randomprojection
## 44:        randomresponse
## 45:               regravg
## 46:       removeconstants
## 47:         renamecolumns
## 48:             replicate
## 49:                 scale
## 50:           scalemaxabs
## 51:            scalerange
## 52:                select
## 53:                 smote
## 54:           spatialsign
## 55:             subsample
## 56:          targetinvert
## 57:          targetmutate
## 58: targettrafoscalerange
## 59:        textvectorizer
## 60:             threshold
## 61:         tunethreshold
## 62:              unbranch
## 63:                vtreat
## 64:            yeojohnson
##                       key
##                                                                         label
##  1:                                Box-Cox Transformation of Numeric Features
##  2:                                                            Path Branching
##  3:                                         Chunk Input into Multiple Outputs
##  4:                                                           Class Balancing
##  5:                                                  Majority Vote Prediction
##  6:                                        Class Weights for Sample Weighting
##  7:                                 Apply a Function to each Column of a Task
##  8:                                                          Collapse Factors
##  9:                                             Change Column Roles of a Task
## 10:                                                 Copy Input Multiple Times
## 11:                                                  Preprocess Date Features
## 12:                                                           Factor Encoding
## 13:                                  Conditional Target Value Impact Encoding
## 14:                              Impact Encoding with Random Intercept Models
## 15:                                   Aggregate Features from Multiple Inputs
## 16:                                                         Feature Filtering
## 17:                                                         Fix Factor Levels
## 18:                           Split Numeric Features into Equally Spaced Bins
## 19:                                            Independent Component Analysis
## 20:                                             Impute Features by a Constant
## 21:                                    Impute Numerical Features by Histogram
## 22:                                      Impute Features by Fitting a Learner
## 23:                                   Impute Numerical Features by their Mean
## 24:                                 Impute Numerical Features by their Median
## 25:                                             Impute Features by their Mode
## 26:                                                   Out of Range Imputation
## 27:                                               Impute Features by Sampling
## 28:                                   Kernelized Principle Component Analysis
## 29:                                              Wrap a Learner into a PipeOp
## 30: Wrap a Learner into a PipeOp with Cross-validated Predictions as Features
## 31:                                             Add Missing Indicator Columns
## 32:                          Transform Columns by Constructing a Model Matrix
## 33:                                                  Explicate a Multiplicity
## 34:                                                  Implicate a Multiplicity
## 35:                                     Add Features According to Expressions
## 36:                                         Non-negative Matrix Factorization
## 37:                                                 Simply Push Input Forward
## 38:              Split a Classification Task into Binary Classification Tasks
## 39:                                         Unite Binary Classification Tasks
## 40:                                              Principle Component Analysis
## 41:                          Wrap another PipeOp or Graph as a Hyperparameter
## 42:                                 Split Numeric Features into Quantile Bins
## 43:                 Project Numeric Features onto a Randomly Sampled Subspace
## 44:                                 Generate a Randomized Response Prediction
## 45:                                             Weighted Prediction Averaging
## 46:                                                  Remove Constant Features
## 47:                                                            Rename Columns
## 48:                                     Replicate the Input as a Multiplicity
## 49:                                         Center and Scale Numeric Features
## 50:       Scale Numeric Features with Respect to their Maximum Absolute Value
## 51:             Linearly Transform Numeric Features to Match Given Boundaries
## 52:                                   Remove Features Depending on a Selector
## 53:                                                           SMOTE Balancing
## 54:                                                   Normalize Data Row-wise
## 55:                                                               Subsampling
## 56:                                             Invert Target Transformations
## 57:                                          Transform a Target by a Function
## 58:             Linearly Transform a Numeric Target to Match Given Boundaries
## 59:                          Bag-of-word Representation of Character Features
## 60:                       Change the Threshold of a Classification Prediction
## 61:                         Tune the Threshold of a Classification Prediction
## 62:                                                  Unbranch Different Paths
## 63:                                           Interface to the vtreat Package
## 64:                            Yeo-Johnson Transformation of Numeric Features
##                                                                         label
##                             packages                             tags
##  1:      mlr3pipelines,bestNormalize                   data transform
##  2:                    mlr3pipelines                             meta
##  3:                    mlr3pipelines                             meta
##  4:                    mlr3pipelines   imbalanced data,data transform
##  5:              mlr3pipelines,stats                         ensemble
##  6:                    mlr3pipelines   imbalanced data,data transform
##  7:                    mlr3pipelines                   data transform
##  8:                    mlr3pipelines                   data transform
##  9:                    mlr3pipelines                   data transform
## 10:                    mlr3pipelines                             meta
## 11:                    mlr3pipelines                   data transform
## 12:              mlr3pipelines,stats            encode,data transform
## 13:                    mlr3pipelines            encode,data transform
## 14:        mlr3pipelines,lme4,nloptr            encode,data transform
## 15:                    mlr3pipelines                         ensemble
## 16:                    mlr3pipelines feature selection,data transform
## 17:                    mlr3pipelines         robustify,data transform
## 18:           mlr3pipelines,graphics                   data transform
## 19:            mlr3pipelines,fastICA                   data transform
## 20:                    mlr3pipelines                         missings
## 21:           mlr3pipelines,graphics                         missings
## 22:                    mlr3pipelines                         missings
## 23:                    mlr3pipelines                         missings
## 24:              mlr3pipelines,stats                         missings
## 25:                    mlr3pipelines                         missings
## 26:                    mlr3pipelines                         missings
## 27:                    mlr3pipelines                         missings
## 28:            mlr3pipelines,kernlab                   data transform
## 29:                    mlr3pipelines                          learner
## 30:                    mlr3pipelines  learner,ensemble,data transform
## 31:                    mlr3pipelines          missings,data transform
## 32:              mlr3pipelines,stats                   data transform
## 33:                    mlr3pipelines                     multiplicity
## 34:                    mlr3pipelines                     multiplicity
## 35:                    mlr3pipelines                   data transform
## 36:           mlr3pipelines,MASS,NMF                   data transform
## 37:                    mlr3pipelines                             meta
## 38:                    mlr3pipelines    target transform,multiplicity
## 39:                    mlr3pipelines            multiplicity,ensemble
## 40:                    mlr3pipelines                   data transform
## 41:                    mlr3pipelines                             meta
## 42:              mlr3pipelines,stats                   data transform
## 43:                    mlr3pipelines                   data transform
## 44:                    mlr3pipelines                         abstract
## 45:                    mlr3pipelines                         ensemble
## 46:                    mlr3pipelines         robustify,data transform
## 47:                    mlr3pipelines                   data transform
## 48:                    mlr3pipelines                     multiplicity
## 49:                    mlr3pipelines                   data transform
## 50:                    mlr3pipelines                   data transform
## 51:                    mlr3pipelines                   data transform
## 52:                    mlr3pipelines feature selection,data transform
## 53:        mlr3pipelines,smotefamily   imbalanced data,data transform
## 54:                    mlr3pipelines                   data transform
## 55:                    mlr3pipelines                   data transform
## 56:                    mlr3pipelines                         abstract
## 57:                    mlr3pipelines                 target transform
## 58:                    mlr3pipelines                 target transform
## 59: mlr3pipelines,quanteda,stopwords                   data transform
## 60:                    mlr3pipelines                 target transform
## 61:              mlr3pipelines,bbotk                 target transform
## 62:                    mlr3pipelines                             meta
## 63:             mlr3pipelines,vtreat   encode,missings,data transform
## 64:      mlr3pipelines,bestNormalize                   data transform
##                             packages                             tags
##                                            feature_types input.num output.num
##  1:                                      numeric,integer         1          1
##  2:                                                   NA         1         NA
##  3:                                                   NA         1         NA
##  4: logical,integer,numeric,character,factor,ordered,...         1          1
##  5:                                                   NA        NA          1
##  6: logical,integer,numeric,character,factor,ordered,...         1          1
##  7: logical,integer,numeric,character,factor,ordered,...         1          1
##  8:                                       factor,ordered         1          1
##  9: logical,integer,numeric,character,factor,ordered,...         1          1
## 10:                                                   NA         1         NA
## 11:                                              POSIXct         1          1
## 12:                                       factor,ordered         1          1
## 13:                                       factor,ordered         1          1
## 14:                                       factor,ordered         1          1
## 15:                                                   NA        NA          1
## 16: logical,integer,numeric,character,factor,ordered,...         1          1
## 17:                                       factor,ordered         1          1
## 18:                                      numeric,integer         1          1
## 19:                                      numeric,integer         1          1
## 20: logical,integer,numeric,character,factor,ordered,...         1          1
## 21:                                      integer,numeric         1          1
## 22:                               logical,factor,ordered         1          1
## 23:                                      numeric,integer         1          1
## 24:                                      numeric,integer         1          1
## 25:               factor,integer,logical,numeric,ordered         1          1
## 26:             character,factor,integer,numeric,ordered         1          1
## 27:               factor,integer,logical,numeric,ordered         1          1
## 28:                                      numeric,integer         1          1
## 29:                                                   NA         1          1
## 30: logical,integer,numeric,character,factor,ordered,...         1          1
## 31: logical,integer,numeric,character,factor,ordered,...         1          1
## 32: logical,integer,numeric,character,factor,ordered,...         1          1
## 33:                                                   NA         1         NA
## 34:                                                   NA        NA          1
## 35: logical,integer,numeric,character,factor,ordered,...         1          1
## 36:                                      numeric,integer         1          1
## 37:                                                   NA         1          1
## 38:                                                   NA         1          1
## 39:                                                   NA         1          1
## 40:                                      numeric,integer         1          1
## 41:                                                   NA        NA          1
## 42:                                      numeric,integer         1          1
## 43:                                      numeric,integer         1          1
## 44:                                                   NA         1          1
## 45:                                                   NA        NA          1
## 46: logical,integer,numeric,character,factor,ordered,...         1          1
## 47: logical,integer,numeric,character,factor,ordered,...         1          1
## 48:                                                   NA         1          1
## 49:                                      numeric,integer         1          1
## 50:                                      numeric,integer         1          1
## 51:                                      numeric,integer         1          1
## 52: logical,integer,numeric,character,factor,ordered,...         1          1
## 53: logical,integer,numeric,character,factor,ordered,...         1          1
## 54:                                      numeric,integer         1          1
## 55: logical,integer,numeric,character,factor,ordered,...         1          1
## 56:                                                   NA         2          1
## 57:                                                   NA         1          2
## 58:                                                   NA         1          2
## 59:                                            character         1          1
## 60:                                                   NA         1          1
## 61:                                                   NA         1          1
## 62:                                                   NA        NA          1
## 63: logical,integer,numeric,character,factor,ordered,...         1          1
## 64:                                      numeric,integer         1          1
##                                            feature_types input.num output.num
##     input.type.train  input.type.predict output.type.train output.type.predict
##  1:             Task                Task              Task                Task
##  2:                *                   *                 *                   *
##  3:             Task                Task              Task                Task
##  4:      TaskClassif         TaskClassif       TaskClassif         TaskClassif
##  5:             NULL   PredictionClassif              NULL   PredictionClassif
##  6:      TaskClassif         TaskClassif       TaskClassif         TaskClassif
##  7:             Task                Task              Task                Task
##  8:             Task                Task              Task                Task
##  9:             Task                Task              Task                Task
## 10:                *                   *                 *                   *
## 11:             Task                Task              Task                Task
## 12:             Task                Task              Task                Task
## 13:             Task                Task              Task                Task
## 14:             Task                Task              Task                Task
## 15:             Task                Task              Task                Task
## 16:             Task                Task              Task                Task
## 17:             Task                Task              Task                Task
## 18:             Task                Task              Task                Task
## 19:             Task                Task              Task                Task
## 20:             Task                Task              Task                Task
## 21:             Task                Task              Task                Task
## 22:             Task                Task              Task                Task
## 23:             Task                Task              Task                Task
## 24:             Task                Task              Task                Task
## 25:             Task                Task              Task                Task
## 26:             Task                Task              Task                Task
## 27:             Task                Task              Task                Task
## 28:             Task                Task              Task                Task
## 29:      TaskClassif         TaskClassif              NULL   PredictionClassif
## 30:      TaskClassif         TaskClassif       TaskClassif         TaskClassif
## 31:             Task                Task              Task                Task
## 32:             Task                Task              Task                Task
## 33:              [*]                 [*]                 *                   *
## 34:                *                   *               [*]                 [*]
## 35:             Task                Task              Task                Task
## 36:             Task                Task              Task                Task
## 37:                *                   *                 *                   *
## 38:      TaskClassif         TaskClassif     [TaskClassif]       [TaskClassif]
## 39:           [NULL] [PredictionClassif]              NULL   PredictionClassif
## 40:             Task                Task              Task                Task
## 41:                *                   *                 *                   *
## 42:             Task                Task              Task                Task
## 43:             Task                Task              Task                Task
## 44:             NULL          Prediction              NULL          Prediction
## 45:             NULL      PredictionRegr              NULL      PredictionRegr
## 46:             Task                Task              Task                Task
## 47:             Task                Task              Task                Task
## 48:                *                   *               [*]                 [*]
## 49:             Task                Task              Task                Task
## 50:             Task                Task              Task                Task
## 51:             Task                Task              Task                Task
## 52:             Task                Task              Task                Task
## 53:             Task                Task              Task                Task
## 54:             Task                Task              Task                Task
## 55:             Task                Task              Task                Task
## 56:        NULL,NULL function,Prediction              NULL          Prediction
## 57:             Task                Task         NULL,Task       function,Task
## 58:         TaskRegr            TaskRegr     NULL,TaskRegr   function,TaskRegr
## 59:             Task                Task              Task                Task
## 60:             NULL   PredictionClassif              NULL   PredictionClassif
## 61:             Task                Task              NULL          Prediction
## 62:                *                   *                 *                   *
## 63:             Task                Task              Task                Task
## 64:             Task                Task              Task                Task
##     input.type.train  input.type.predict output.type.train output.type.predict</code></pre>
</div>
<div id="nodes-edges-and-graphs" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Nodes, Edges and Graphs<a href="cheat-sheets.html#nodes-edges-and-graphs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>POs are combined into Graphs.</p>
<p>POs are identified by their $id. Note that the operations all modify the object in-place and return the object itself. Therefore, multiple modifications can be chained.</p>
<p>Connects PipeOps with edges to control data flow during training and prediction. Input is sent to sources (no in-edges), output is read from sinks (no out-edges).</p>
<p>Important methods and slots:</p>
<pre><code>
Display:print(gr),gr\$plot(html = TRUE) Accessing PipeOps: gr\$pipeops

Named list of all contained POs.
</code></pre>
<p>The %&gt;&gt;% operator takes either a PipeOp or a Graph on each of its sides and connects all left-hand outputs to the right-hand inputs. For full control, connect PipeOps explicitly:</p>
<pre><code>
gr = Graph\$new()

gr\$add_pipeop(po(&quot;pca&quot;))

gr\$add_pipeop(lrn(&quot;classif.rpart&quot;))

gr\$add_edge(&quot;pca&quot;, &quot;classif.rpart&quot;)
</code></pre>
<p>GraphLearner behave like Learner and enable all mlr3 features:</p>
<pre><code>
grl = GraphLearner\$new(gr).
</code></pre>
<p>See slots $encapsulate for debugging and $model for results after training.</p>
<p>Concatenate POs with %&gt;&gt;% to get linear graph.</p>
</div>
<div id="modeling" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Modeling<a href="cheat-sheets.html#modeling" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The main purpose of a Graph is to build combined preprocessing and model fitting pipelines that can be used as mlr3 Learner.</p>
<div id="setting-hyperparameters" class="section level4 hasAnchor" number="3.2.3.1">
<h4><span class="header-section-number">3.2.3.1</span> Setting Hyperparameters<a href="cheat-sheets.html#setting-hyperparameters" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Individual POs offer hyperparameters because they contain $param_set slots that can be read and written from $param_set$values (via the paradox package). The parameters get passed down to the Graph, and finally to the GraphLearner . This makes it not only possible to easily change the behavior of a Graph / GraphLearner and try different settings manually, but also to perform tuning using the mlr3tuning package.</p>
<p>For POs: Exactly as in a Learner.</p>
<pre><code>enc = po(&quot;encode&quot;)

enc\$param_set

enc\$param_set\$values = list(method=&quot;one-hot&quot;)

po(&quot;encode&quot;, param_vals = list(method=&quot;one-hot&quot;))
</code></pre>
<p>For Graph / GraphLearner: All HPs are collected in a global ParamSet stored in $param_set. IDs are prefixed with the respective PipeOp’s id.</p>
</div>
<div id="tuning" class="section level4 hasAnchor" number="3.2.3.2">
<h4><span class="header-section-number">3.2.3.2</span> Tuning<a href="cheat-sheets.html#tuning" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Can jointly tune any Pipeline. Usage of AutoTuner is identical.</p>
<p>Details could be seen in below section.</p>
</div>
</div>
<div id="non-linear-graphs" class="section level3 hasAnchor" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Non-Linear Graphs<a href="cheat-sheets.html#non-linear-graphs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The Graphs seen so far all have a linear structure. Some POs may have multiple input or output channels. These channels make it possible to create non-linear Graphs with alternative paths taken by the data.</p>
<p>Possible types are:</p>
<p>Branching: Splitting of a node into several paths, e.g. useful when comparing multiple feature-selection methods (pca, filters). Only one path will be executed.</p>
<p>Copying: Splitting of a node into several paths, all paths will be executed (sequentially). Parallel execution is not yet supported.</p>
<p>Stacking: Single graphs are stacked onto each other, i.e. the output of one Graph is the input for another. In machine learning this means that the prediction of one Graph is used as input for another Graph.</p>
<div id="common-functions" class="section level4 hasAnchor" number="3.2.4.1">
<h4><span class="header-section-number">3.2.4.1</span> Common functions:<a href="cheat-sheets.html#common-functions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>gunion()</code> arranges PipeOps or Graphs next to each other in a disjoint graph union.</p>
<p>pipeline_greplicate() creates a new Graph containing n copies of the input (PipeOp or Graph).</p>
<p>PipeOpFeatureUnion aggregates features from all input tasks into a single Task.</p>
</div>
<div id="branching-copying" class="section level4 hasAnchor" number="3.2.4.2">
<h4><span class="header-section-number">3.2.4.2</span> Branching &amp; Copying<a href="cheat-sheets.html#branching-copying" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The PipeOpBranch and PipeOpUnbranch POs make it possible to specify multiple alternative paths. Only one path is actually executed, the others are ignored. The active path is determined by a hyperparameter. This concept makes it possible to tune alternative preprocessing paths (or learner models).</p>
<p>They controls the path execution. Only one branch can be active. Which one is controlled by a hyperparameter. Unbranching ends the forking.</p>
<p>Example:</p>
<pre><code>
gr = ppl(&quot;branch&quot;, list(

pca = po(&quot;pca&quot;), scale = po(&quot;scale&quot;))

)

# set the &quot;pca&quot; path as the active one:

gr\$param_set\$values\$branch.selection = &quot;pca&quot;
</code></pre>
<p>Tuning the branching selection enables powerful model selection.</p>
</div>
</div>
</div>
<div id="hyperparameter-tuning" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Hyperparameter Tuning<a href="cheat-sheets.html#hyperparameter-tuning" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="cheat-sheets.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mlr3learners)</span>
<span id="cb35-2"><a href="cheat-sheets.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mlr3tuning)</span></code></pre></div>
<p>The table shows the terminator methods:</p>
<pre><code>##                 key                label             properties        unit
## 1:       clock_time           Clock Time single-crit,multi-crit     seconds
## 2:            combo          Combination single-crit,multi-crit     percent
## 3:            evals Number of Evaluation single-crit,multi-crit evaluations
## 4:             none                 None single-crit,multi-crit     percent
## 5:     perf_reached    Performance Level            single-crit     percent
## 6:         run_time             Run Time single-crit,multi-crit     seconds
## 7:       stagnation           Stagnation            single-crit     percent
## 8: stagnation_batch     Stagnation Batch            single-crit     percent</code></pre>
<p>The table shows tuner search strategy we can choose from:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="cheat-sheets.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.table</span>(mlr_tuners) </span></code></pre></div>
<pre><code>##              key                                           label
## 1:         cmaes Covariance Matrix Adaptation Evolution Strategy
## 2: design_points                                   Design Points
## 3:         gensa                 Generalized Simulated Annealing
## 4:   grid_search                                     Grid Search
## 5:         irace                                 Iterated Racing
## 6:        nloptr                         Non-linear Optimization
## 7: random_search                                   Random Search
##                                   param_classes
## 1:                                     ParamDbl
## 2: ParamLgl,ParamInt,ParamDbl,ParamFct,ParamUty
## 3:                                     ParamDbl
## 4:          ParamLgl,ParamInt,ParamDbl,ParamFct
## 5:          ParamDbl,ParamInt,ParamFct,ParamLgl
## 6:                                     ParamDbl
## 7:          ParamLgl,ParamInt,ParamDbl,ParamFct
##                             properties                packages
## 1:                         single-crit mlr3tuning,bbotk,adagio
## 2: dependencies,single-crit,multi-crit        mlr3tuning,bbotk
## 3:                         single-crit  mlr3tuning,bbotk,GenSA
## 4: dependencies,single-crit,multi-crit              mlr3tuning
## 5:            dependencies,single-crit  mlr3tuning,bbotk,irace
## 6:                         single-crit mlr3tuning,bbotk,nloptr
## 7: dependencies,single-crit,multi-crit        mlr3tuning,bbotk</code></pre>
<p>The parameter set is combined in mutivariate search space SS: ss = ps(&lt;id&gt; = p_int(lower, upper), &lt;id&gt;= p_dbl(lower, upper), &lt;id&gt; = p_dct(levels), &lt;id&gt; = p_lgl())</p>
<p>The &lt;id&gt; represents identifier, and lower, upper, levels are the bounds.</p>
<p>Or, we can use to_tune() to set SS for each parameter.</p>
<p>To tune by hand, we need to fill define all the arguments in the equation: instance = TuningInstanceSingleCrit$new(task,learner, resampling, measure,terminator, ss) tuner = tnr(&lt;tuner&gt;) We need to use TunningInstanceMultiCrit for multi-criteria tuning.</p>
<p>Then we access the results:</p>
<p>tuner$optimize(instance) as.data.table(instance$archive) learner$param_set$values = instance$result_learner_param_vals</p>
<p>The auto tuner:</p>
<p>auto_tuner(</p>
<p>method = tnr(&lt;tuner search strategy&gt;),</p>
<p>learner = lrn(&lt;learner&gt;, cp = to_tune(lower bound, upperbound, logscale = &lt;TRUE/FALSE&gt;)),</p>
<p>resampling = rsmp(&lt;method&gt;),</p>
<p>measure = msr(&lt;measure&gt;),</p>
<p>term_evals = &lt;#&gt;,</p>
<p>batch_size = &lt;#&gt;</p>
<p>)</p>
</div>
<div id="feature-selection" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Feature Selection<a href="cheat-sheets.html#feature-selection" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="cheat-sheets.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mlr3fselect)</span></code></pre></div>
<p>Here is the auto feature selector：</p>
<p>The table shows fselectors method we can choose from:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="cheat-sheets.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.table</span>(mlr_fselectors) </span></code></pre></div>
<pre><code>##                       key                         label
## 1:          design_points                 Design Points
## 2:      exhaustive_search             Exhaustive Search
## 3:         genetic_search                Genetic Search
## 4:          random_search                 Random Search
## 5:                    rfe Recursive Feature Elimination
## 6:             sequential             Sequential Search
## 7: shadow_variable_search        Shadow Variable Search
##                             properties          packages
## 1: dependencies,single-crit,multi-crit mlr3fselect,bbotk
## 2:              single-crit,multi-crit       mlr3fselect
## 3:                         single-crit       mlr3fselect
## 4:              single-crit,multi-crit       mlr3fselect
## 5:                         single-crit       mlr3fselect
## 6:                         single-crit       mlr3fselect
## 7:                         single-crit       mlr3fselect</code></pre>
<p>First, we make feature selection by hand, and the process is similar to hyper parameter tuning, we need to define all the arguments and then we can get the result: instance = FSelectInstanceSingleCrit$new(task, learner, resampling, measure, terminator) fselector = fs(&lt;fs method&gt;, batch_size = &lt;number&gt;) fselector$optimize(instance) instance$result</p>
<p>We can reselect the features we want using the code: task$select(instance$result_feature_set)</p>
<p>Next, we will introduce the auto feature selector that eases the process:</p>
<p>autot=auto_fselector(</p>
<p>method = &lt;fselector&gt;,</p>
<p>learner = &lt;your learner&gt;,</p>
<p>resampling = rsmp(&lt;method&gt;),</p>
<p>measure = msr(&lt;measure&gt;),</p>
<p>term_evals = &lt;#&gt;,</p>
<p>batch_size = &lt;#&gt;) autot$train(task, row_ids) autot$predict(task, row_ids)</p>
<p>We can check the feature selection subset by calling the learner again:</p>
<p>autot$learner</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="package-prepare.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sample-for-classification-problems.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Ellie-117/mlr3_tutorial/edit/main/cheatsheets.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/Ellie-117/mlr3_tutorial/blob/main/cheatsheets.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
